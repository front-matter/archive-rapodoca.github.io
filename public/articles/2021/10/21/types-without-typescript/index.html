<!DOCTYPE html>
<html lang="en-us" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en-us" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Types without TypeScript &middot; Depth-First</title>
  <meta name="title" content="Types without TypeScript &middot; Depth-First" />
  
  <meta name="description" content="Build type-safety into JavaScript projects without sacrificing language or tooling." />
  
  
  
  <link rel="canonical" href="http://localhost:1313/articles/2021/10/21/types-without-typescript/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.e27868ab1485f7ed7b06b122b4980bd38b19526eb8f7de885181204d28f04a0c47e9c334eff19a06c0278eb2ff8415b983a5d0fb80fd6b5680c926457cc61c57.css"
    integrity="sha512-4nhoqxSF9&#43;17BrEitJgL04sZUm64996IUYEgTSjwSgxH6cM07/GaBsAnjrL/hBW5g6XQ&#43;4D9a1aAySZFfMYcVw==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.c178288131a2f1ad46910438db47ac5f7e1c48cf949e49f6dc3310c8ec9660e23fe505805eba4e2e73711335808500360d773a2b64322feb35df52856edca286.js"
    integrity="sha512-wXgogTGi8a1GkQQ420esX34cSM&#43;Unkn23DMQyOyWYOI/5QWAXrpOLnNxEzWAhQA2DXc6K2QyL&#43;s131KFbtyihg==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S&#43;Yti0U7QtuZvQ=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/articles/2021/10/21/types-without-typescript/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="Types without TypeScript">
  <meta property="og:description" content="Build type-safety into JavaScript projects without sacrificing language or tooling.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-10-21T02:30:00+00:00">
    <meta property="article:modified_time" content="2021-10-21T02:30:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Types without TypeScript">
  <meta name="twitter:description" content="Build type-safety into JavaScript projects without sacrificing language or tooling.">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Types without TypeScript",
    "headline": "Types without TypeScript",
    
    "abstract": "Build type-safety into JavaScript projects without sacrificing language or tooling.",
    "inLanguage": "en-us",
    "url" : "http:\/\/localhost:1313\/articles\/2021\/10\/21\/types-without-typescript\/",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    "copyrightYear": "2021",
    "dateCreated": "2021-10-21T02:30:00\u002b00:00",
    "datePublished": "2021-10-21T02:30:00\u002b00:00",
    
    "dateModified": "2021-10-21T02:30:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "3785"
  }]
  </script>


  
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  
  



  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Depth-First</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400" style="margin-right:5px">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" class="block">
            

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Types without TypeScript
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2021-10-21T02:30:00&#43;00:00">October 21, 2021</time><span class="px-2 text-primary-500">&middot;</span><span>3785 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">18 mins</span>
  

  
  
</div>








    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
  <div class="place-self-center">
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
    

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <p>An oft-cited element of JavaScript&rsquo;s success is dynamic typing. The language&rsquo;s minimal type system means that type errors are reported at runtime. This flexibility can be liberating during early work lacking a clear design. But like any technology, there are tradeoffs. A project that grows in size, complexity, or developer count can expose the true costs of dynamic typing. This article takes a look at the problem and offers a detailed solution that works without transpilers, new languages, or unusual tooling.</p>


<h1 class="relative group">QuickStart 
    <div id="quickstart" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#quickstart" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>The discussion that follows uses the source code and configurations found in <a href="https://github.com/rapodaca/typed-javascript" target="_blank">this repository</a>. To start using types with JavaScript, clone the repo, run the <code>tsc</code> task, and replace the source code with your own.</p>
<!-- raw HTML omitted -->


<h1 class="relative group">Why Not TypeScript? 
    <div id="why-not-typescript" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#why-not-typescript" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>One method of adding types to JavaScript is <a href="https://www.typescriptlang.org" target="_blank">TypeScript</a>. TypeScript is a statically-typed language that compiles to JavaScript. Unlike languages such as Java or Rust, types are optional in TypeScript. In other words, TypeScript lets you pay as you go. Like many statically typed languages, TypeScript supports type inference so that needless type information can be elided, while retaining all of the benefits of typed values.</p>
<p>Since its introduction in 2012 by Microsoft, the tooling and popularity of TypeScript have grown considerably. The 2021 <a href="https://insights.stackoverflow.com/survey/2021" target="_blank">StackOverflow Developer Survey</a> placed Typescript as the sixth most commonly used programming language and the third &ldquo;most loved&rdquo; language.</p>
<p>Given the activity around TypeScript, why not just use it? There are several reasons:</p>
<ul>
<li><em>TypeScript is not JavaScript.</em> Claims that TypeScript is a &ldquo;superset&rdquo; of JavaScript, are <a href="https://stackoverflow.com/questions/29918324/" target="_blank">questionable at best</a>. A more accurate model would consider TypeScript and JavaScript to be mutually exclusive languages with a common ancestry. In other words, it&rsquo;s possible to create programs in one language that are incompatible with the other.</li>
<li><em>TypeScript must be compiled.</em> None of the most prevalent runtimes, either browser-based or Node.js, support TypeScript directly. The only way to use TypeScript programs on these platforms is to transpile it to JavaScript. This dependency can set up a cascade of events that may pose serious challenges for a project. For example, with a compiler comes a <a href="https://dev.to/alekseiberezkin/typescript-is-slow-what-can-we-do-about-it-30hm" target="_blank">compile time</a> that can in extreme cases interfere with development itself. This interference may not be clear until a project is well underway.</li>
<li><em>All-or-Nothing.</em> Although many things can change during a project, the programming language is the least likely to do so given its all-encompassing nature. Backing out of a TypeScript experiment gone wrong could be expensive.</li>
<li><em>Future JavaScript compatibility.</em> Although TypeScript and JavaScript may be close cousins, they are separate languages. Each feature added to either language raises the possibility of mutual incompatibility down the road. For example, if syntax-level type annotations (à la Python 3) ever make it into JavaScript, there&rsquo;s no guarantee that they would be compatible with TypeScript.</li>
<li><em>Maintainability.</em> The more TypeScript and JavaScript diverge, the more difficult it will be to cross-train developers on each language. After a number of years, the current main advantage of TypeScript, close syntactic similarity to JavaScript, could fade. This could cause problems with a TypeScript project&rsquo;s long-term maintenance.</li>
<li><em>Existing projects must be ported.</em> The mutual incompatibility of the two languages in the general sense means that adopting TypeScript on an existing project guarantees some form of rewrite. The benefits may not justify the costs.</li>
</ul>
<p>What if there were a low-risk path from JavaScript to JavaScript with types?</p>


<h1 class="relative group">JSDoc 
    <div id="jsdoc" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#jsdoc" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p><a href="https://jsdoc.app" target="_blank">JSDoc</a> is JavaScript&rsquo;s documentation markup system. One of its most valuable uses is type annotation. A system of tags, preceded by the at symbol (<code>@</code>), makes it possible to describe the shape of data within a JavaScript program at high resolution. Consider the following simple example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {number} i
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string} j
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">add</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> parseFloat(<span style="color:#a6e22e">j</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Changing the <code>add</code> function in a way that&rsquo;s incompatible with the JSDoc type annotations causes VS Code to complain noticeably and actionably.</p>
<!-- raw HTML omitted -->
<p>Although JSDoc&rsquo;s original purpose was documentation, it is increasingly being used as a detachable type system for JavaScript. I say &ldquo;detachable&rdquo; because the type information itself is cleanly separable from the code, unlike TypeScript. Detachable typing has been driven by two major forces over the last dozen years or so:</p>
<ul>
<li><a href="https://developers.google.com/closure" target="_blank">Closure Tools</a> (aka &ldquo;Closure&rdquo;). Two components, a compiler and a comprehensive standard library, use JSDoc type annotations extensively. Although Closure&rsquo;s importance has waned over the years, it was the first large-scale effort to implement a type system on top of JavaScript.</li>
<li>TypeScript. In many respects, TypeScript has picked up where Closure left off. There are two factors at play. First, VS Code has for some time provided type hints based on JSDoc. Second, most of TypeScript&rsquo;s type system has been ported to JSDoc.</li>
</ul>
<p>The combination of VS Code and JSDoc type annotation tags means that developers can get most of the advantages of statically typed languages without having to sacrifice the tooling, universal deployability, or developer expertise of JavaScript.</p>


<h1 class="relative group">Typed JavaScript 
    <div id="typed-javascript" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#typed-javascript" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>The use of JSDoc as a lightweight typing system for JavaScript yields something I call <em>Typed JavaScript</em>. Typed JavaScript is a system of tooling and conventions that exposes type hints and type errors before a program is run. JavaScript lacks a mandatory compile step, so it doesn&rsquo;t make much sense to talk about <a href="https://en.wikipedia.org/wiki/Type_system" target="_blank">static typing</a>. But Typed JavaScript offers the same main advantage as a compiled, statically typed language.</p>
<p>The benefits of pre-execution type checking in dynamically-typed languages are worth considering. Unit tests can only address some of the errors that code may be exposed to. Used together with a good test suite, typed JavaScript can make most bugs more visible, and sooner, than would otherwise be possible.</p>
<p>Developers using Python 3 have come to similar conclusions. For example, the <a href="https://github.com/urllib3/urllib3" target="_blank">urllib3</a> team completed a retrofit of type hints onto the most downloaded package on the Python Package Index. The lead maintainer, <a href="https://sethmlarson.dev/" target="_blank">Seth Larson</a>, recently wrote in detail about the experience, <a href="https://sethmlarson.dev/blog/2021-10-18/tests-arent-enough-case-study-after-adding-types-to-urllib3" target="_blank">concluding</a>:</p>
<blockquote>
<p>Adding type hints to urllib3 was clearly a huge amount of work, hundreds of engineer hours across several months. What we once thought would be a purely developer-facing change ended up making the codebase more robust than ever. Several non-trivial logic errors were fixed and our team is more confident reviewing and merging PRs. This is a big win for our users and a very worthy investment.</p>
</blockquote>
<p>JavaScript may lack language support for types in the Python 3 sense, but this can be simulated with Typed JavaScript.</p>


<h1 class="relative group">Using Typed JavaScript 
    <div id="using-typed-javascript" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#using-typed-javascript" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>&ldquo;Typed JavaScript&rdquo; is a name I made up to describe a loose collection of practices around detachable types in JavaScript. The history and extent of these practices is currently murky. What&rsquo;s clear is that the approach has a following, as evidenced by this <a href="https://stackoverflow.com/questions/45836847/" target="_blank">Question</a> and many like it. In 2019, Stefan Baumgartner described some of the same conventions described here in an article titled <em><a href="https://fettblog.eu/typescript-jsdoc-superpowers/" target="_blank">TypeScript without TypeScript &ndash; JSDoc superpowers</a></em>. Developers are using detachable types, but understanding how is hampered by the lack of a label under which to bring all of the documentation.</p>
<p>This amorphous quality leads to the main challenge when using Typed JavaScript, lack of documentation. It can be seen most clearly along two axes: syntax and tooling. Syntax is challenging because JSDoc bears the marks of many different influences over many years. As a result, not all type formulations will work with all tools. A lot of documentation is therefore of limited value.</p>
<p>This brings us to tooling. Typed JavaScript as I&rsquo;ll document it here is powered by <a href="https://code.visualstudio.com" target="_blank">Microsoft Visual Studio Code</a> (&ldquo;VS Code&rdquo;). This is the pre-eminent IDE for TypeScript. As a result, it&rsquo;s not hard to find a lot of current, good documentation around using VS Code and TypeScript together. What&rsquo;s much harder is finding good documentation on the alternative approach involving JSDoc comments.</p>
<p>As I&rsquo;ve worked with Typed JavaScript in my current project, one of the biggest gaps I&rsquo;ve found is how to formulate JSDoc type tags in a way that VS Code can translate to useful JavaScript type information.</p>


<h1 class="relative group">Common Tag Patterns 
    <div id="common-tag-patterns" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#common-tag-patterns" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>Wikipedia notes that a <a href="https://en.wikipedia.org/wiki/Software_design_pattern" target="_blank">&ldquo;Design Pattern&rdquo;</a> embodies a &ldquo;reusable solution to a commonly occurring problem within a given context of software design.&rdquo; While working with Typed JavaScript, I&rsquo;ve found it helpful to compile patterns of common use.</p>
<p>The following examples stick with the convention I&rsquo;ve found handy — use JSDoc annotations exclusively, rather than mixed JSDoc/JavaScript. By mixed JSDoc/JavaScript, I mean something like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Mixed JS/JSDoc style is not recommended.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Product</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">class</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {Region} region
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @returns {Currency}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   **/</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">price</span> (<span style="color:#a6e22e">region</span>) { <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;unimplemented&#39;</span>); }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>For reasons I won&rsquo;t get into now, I find it cleaner and easier to avoid the above style and instead define complex types entirely within JSDoc.</p>
<p>Microsoft has published a <a href="https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html" target="_blank">JSDoc Reference</a>, which is useful for understanding specific syntax. However, this reference lacks higher-level principles for composing tags. What follows is a small start on that.</p>


<h2 class="relative group">Optional Value 
    <div id="optional-value" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#optional-value" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>One of the most useful tag patterns is also the simplest. When a value may be of some type or <code>null</code>, a shortcut can be used.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string} first
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string} last
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string?} middle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">printName</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">last</span>, <span style="color:#a6e22e">middle</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">first</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">middle</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">middle</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">last</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>The question mark (<code>?</code>) after the <code>string</code> type means that the value of <code>middle</code> is &ldquo;nullable.&rdquo; Attempting to pass anything other than a <code>string</code> or <code>null</code> results in an error.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ERROR: Argument of type &#39;undefined&#39; is not assignable to parameter of type &#39;string | null&#39;.ts(2345)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">printName</span>(<span style="color:#e6db74">&#39;John&#39;</span>, <span style="color:#e6db74">&#39;Public&#39;</span>, <span style="color:#66d9ef">undefined</span>);
</span></span></code></pre></div><p>A different kind of type restriction may be desired. For example, to restrict a value to <code>string</code> or <code>undefined</code>, use the following syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string} first
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string} last
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string|undefined} middle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">printName2</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">last</span>, <span style="color:#a6e22e">middle</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">first</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">middle</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">middle</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">last</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// No error.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">printName2</span>(<span style="color:#e6db74">&#39;John&#39;</span>, <span style="color:#e6db74">&#39;Public&#39;</span>, <span style="color:#66d9ef">undefined</span>);
</span></span></code></pre></div>

<h2 class="relative group">Struct 
    <div id="struct" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#struct" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Many languages have the concept of a bag of values or &ldquo;struct.&rdquo; JavaScript has object literals, but values can assume any type by default. To constrain values, use the <a href="https://jsdoc.app/tags-typedef.html" target="_blank"><code>@typedef</code></a> tag:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} User
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {string} first_name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {string} last_name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {number} id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>The following would assign a value of type <code>User</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">first_name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Alice&#39;</span>, <span style="color:#a6e22e">last_name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Smith&#39;</span>, <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">123</span> };
</span></span></code></pre></div>

<h2 class="relative group">Union Type 
    <div id="union-type" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#union-type" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>It&rsquo;s sometimes helpful to designate a data structure as satisfying more than one type constraint. The idea is somewhat analogous to multiple inheritance. This can be accomplished through a union type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Foo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {string} name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Bar
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {number} age
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {Foo &amp; Bar} FooBar
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>Object literals like the one below would satisfy <code>Foo</code> type constraints, and would be usable wherever a <code>Foo</code> or a <code>Bar</code> is required:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">foobar</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;John&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">42</span> };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/** 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Foo} foo 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {string}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">checkFoo</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">foo</span>) =&gt; <span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">name</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/** 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Bar} bar 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {string}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">checkBar</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">bar</span>) =&gt; <span style="color:#a6e22e">bar</span>.<span style="color:#a6e22e">name</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkFoo</span>(<span style="color:#a6e22e">foobar</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkBar</span>(<span style="color:#a6e22e">foobar</span>);
</span></span></code></pre></div>

<h2 class="relative group">Generics 
    <div id="generics" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#generics" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>In statically typed languages, we think of generics as broadening the range of possible types a value may assume. In JavaScript, however, it makes more sense to view generics as <em>constraining</em> the allowed types of a value. Consider a generic <code>Range</code> data structure, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @template T
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Range
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {T} start
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {T} end
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>A range comprised of two different types makes little sense. So the type parameter <code>T</code> constrains the allowed values of <code>start</code> and <code>end</code>. Whatever type we use for one property must match the other. The following object literal satisfies the constraints of <code>Range</code> because <code>start</code> and <code>end</code> properties are of the same type (<code>number</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">alphabet</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">start</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">13</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">end</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">42</span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Passing type parameters narrows the range of types even further. For example, a function can restrict itself to only numerical ranges as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Range&lt;number&gt;}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">distance</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">range</span> =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// find distance implied by range
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;not implemented&#39;</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Later we may decide that <code>distance</code> should only work with types whose values conform to a <code>Comparable</code> interface. In that case, the range of allowed types can be restricted by a type parameter of type <code>Comparable</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Comparable
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {function(Comparable): number} compare
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @template {Comparable} T
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Range&lt;T&gt;} first
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Range&lt;T&gt;} second 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">distance2</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">second</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">first</span>.<span style="color:#a6e22e">start</span>.<span style="color:#a6e22e">compare</span>(<span style="color:#a6e22e">second</span>.<span style="color:#a6e22e">start</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// first precedes second
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// second precedes first
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;not implemented&#39;</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div>

<h2 class="relative group">Function 
    <div id="function" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#function" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Because functions can be passed as parameters, it makes sense to restrict the parameters associated with them. This comes up, for example, in <a href="https://en.wikipedia.org/wiki/Higher-order_function" target="_blank">higher-order functions</a>. The types associated with a function can be constrained using the <a href="https://jsdoc.app/tags-callback.html" target="_blank"><code>@callback</code></a> tag. It might seem as if <a href="https://jsdoc.app/tags-function.html" target="_blank"><code>@function</code></a> would be a better choice, but it is currently not recognized by VS Code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @callback add
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {number} i
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {string} j
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>The following would satisfy the restrictions for <code>add</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @type {add}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myAdd</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span>) =&gt; <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> parseFloat(<span style="color:#a6e22e">j</span>);
</span></span></code></pre></div><p>Alternatively, a function parameter or return type can be specified inline.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {number} attenuation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {function(number, number): number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">createAdder</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attenuation</span> =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span>) =&gt; <span style="color:#a6e22e">attenuation</span> <span style="color:#f92672">*</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">j</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div>

<h2 class="relative group">Enum 
    <div id="enum" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#enum" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Sometimes we want to restrict the range of specific values a particular type may assume. This can be accomplished with enums.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Car
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {&#39;GM&#39;|&#39;Ford&#39;|&#39;Chrysler&#39;|&#39;Tesla&#39;|&#39;Toyota&#39;} make
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span></code></pre></div><p>The following object literal would satisfy the <code>Car</code> type constraint:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">car</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">make</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Tesla&#39;</span> };
</span></span></code></pre></div>

<h2 class="relative group">Record 
    <div id="record" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#record" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Some situations call for a dictionary-like data structure with values of the same type. For example, a web application may extract query parameters from a URL. If all values of are the same type (e.g., <code>string</code>), a <code>Record</code> can be used.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Record&lt;&#39;first_name&#39;|&#39;last_name&#39;, string?&gt;} query
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">handle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">query</span> =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">first_name</span>, <span style="color:#a6e22e">last_name</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">query</span>;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p><code>Record</code> is an example of TypeScript&rsquo;s built-in <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank">utility types</a>.</p>


<h2 class="relative group">Utility Types 
    <div id="utility-types" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#utility-types" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>One of TypeScript&rsquo;s best features is utility types. As <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank">documented by Microsoft</a>, utility types &ldquo;facilitate common type transformations.&rdquo;</p>
<p>Consider a situation in which we want to ensure the immutability of a value passed to a function. This can be accomplished with the <code>Readonly</code> utility type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Person
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {number} experience (in years)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Readonly&lt;Array&lt;Person&gt;&gt;} people
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cumulativeExperience</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">people</span> =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">people</span>.<span style="color:#a6e22e">pop</span>(); <span style="color:#75715e">// ERROR: Property &#39;pop&#39; does not exist on type &#39;readonly Person[]&#39;.ts(2339)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">people</span>.<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">total</span>, <span style="color:#a6e22e">person</span>) =&gt; <span style="color:#a6e22e">total</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">experience</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Several other utility types are available.</p>


<h2 class="relative group">Interface 
    <div id="interface" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#interface" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>An interface is a collection of methods associated with the same value. Although JavaScript lacks the concept of interface, it can be simulated as a <code>typedef</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Animal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {function(string): string} talk
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {function(): string} walk
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/** @type Animal */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">duck</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">talk</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">name</span> =&gt; <span style="color:#e6db74">`Quack quack, </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">walk</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#e6db74">&#39;Waddle, waddle.&#39;</span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div>

<h2 class="relative group">Async/Await 
    <div id="asyncawait" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#asyncawait" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>JavaScript implements async/await on top of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">Promises</a>. This legacy shows through in the type signature for async functions (<code>@returns {Promise&lt;T&gt;}</code>).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Employee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {number} wage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Database
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {function(number): Employee} getEmployeeById
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {number} id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Database} db
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {Promise&lt;number&gt;}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">wage</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">db</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">getEmployeeById</span>(<span style="color:#a6e22e">id</span>).<span style="color:#a6e22e">wage</span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div>

<h1 class="relative group">Imports 
    <div id="imports" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#imports" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>It&rsquo;s common practice to define a type in one JavaScript file and use it in another. Two procedures are available, both of which use the <code>import</code> directive.</p>
<p>But before getting to the syntax, a crucial point must be understood. Types will be assigned to a global namespace unless they reside in a module. To add a type to a module, ensure that it is defined within a file that uses the <code>export</code> keyword. Every Typed JavaScript type definition should reside in a module.</p>
<p>The following illustrates a minimal type definition and export:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/** @typedef {object} Foo */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { }
</span></span></code></pre></div><p>Given that a type is defined within a module, it can be imported with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// ./point.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @typedef {object} Point
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {number} x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @property {number} y
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ./functions/x-distance.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {import(&#39;../point.js&#39;).Point} point
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {number} x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">xDistance</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">point</span>, <span style="color:#a6e22e">x</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">point</span>.<span style="color:#a6e22e">x</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { }
</span></span></code></pre></div><p>Alternatively, types can be imported using an ES6 module style as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/** @typedef {import(&#39;../point.js&#39;).Point} Point */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {Point} point
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @param {number} x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @returns {number}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">xDistance</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">point</span>, <span style="color:#a6e22e">x</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">point</span>.<span style="color:#a6e22e">x</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { }
</span></span></code></pre></div><p>I favor the latter style because it better parallels the structure of most ES6 code. JSDoc <code>import</code> directives can be placed at the top of a file, just after the ES6 imports.</p>


<h1 class="relative group">Using TypeScript Libraries 
    <div id="using-typescript-libraries" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#using-typescript-libraries" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>JavaScript runtimes expose various objects that can be used without instantiation or explicit import. Out of the box, VS Code won&rsquo;t know which of these objects can be referenced safely. For example, the <code>console</code> object exists both in browsers and Node.js contexts.</p>
<p>However, using <code>console</code> will generate a VS Code error by default:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Wat?&#39;</span>); <span style="color:#75715e">// ERROR: Cannot find name &#39;console&#39;. Do you need to change your target library? Try changing the &#39;lib&#39; compiler option to include &#39;dom&#39;.ts(2584)
</span></span></span></code></pre></div><p>Unfortunately, the error message&rsquo;s suggestion is misleading. The way to resolve the error is to add &ldquo;@types/node&rdquo; to your NPM dev dependencies, followed by invocation of <code>npm i</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;module&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;devDependencies&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;typescript&#34;</span>: <span style="color:#e6db74">&#34;4.4.4&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;@types/node&#34;</span>: <span style="color:#e6db74">&#34;16.11.1&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The line containing &ldquo;@types/node&rdquo; points to the <a href="https://www.npmjs.com/package/@types/npm" target="_blank">Types NPM Package</a>. This is a suite of TypeScript type definitions that can be used from VS Code to silence errors and provide useful type information — not only for Node.js but many NPM packages.</p>


<h1 class="relative group">VS Code 
    <div id="vs-code" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#vs-code" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>So far this article has mentioned VS Code as a context through which type errors will manifest themselves, without describing how to get this working in practice. Although the process is not complicated, it is also not well-documented. Here are the steps I used.</p>
<p>First, create a blank VS Code project and open it. The project should be devoid of files.</p>
<p>Next, add the following as <code>./package.json</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;module&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;devDependencies&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;typescript&#34;</span>: <span style="color:#e6db74">&#34;4.4.4&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;@types/node&#34;</span>: <span style="color:#e6db74">&#34;16.11.1&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Create the file <code>./.vscode/tasks.json</code> (notice the dot preceding &ldquo;vscode&rdquo;) and add the following content to it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tasks&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;tsc&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;shell&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;./node_modules/typescript/bin/tsc&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;presentation&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;echo&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;reveal&#34;</span>: <span style="color:#e6db74">&#34;never&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;focus&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;panel&#34;</span>: <span style="color:#e6db74">&#34;shared&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;showReuseMessage&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;clear&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [<span style="color:#e6db74">&#34;--noEmit&#34;</span>, <span style="color:#e6db74">&#34;--watch&#34;</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;problemMatcher&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;$tsc-watch&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;isBackground&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Finally, create the file <code>./tsconfig.json</code> with the following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;compilerOptions&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;outDir&#34;</span>: <span style="color:#e6db74">&#34;./dummy&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;target&#34;</span>: <span style="color:#e6db74">&#34;ES6&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;lib&#34;</span>: [<span style="color:#e6db74">&#34;ES6&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;checkJs&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;allowJs&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;skipLibCheck&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;moduleResolution&#34;</span>: <span style="color:#e6db74">&#34;node&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;strictNullChecks&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;allowSyntheticDefaultImports&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;exclude&#34;</span>: [
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;node_modules&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;include&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;index.js&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;lib/**/*.js&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;test/**/*.js&#34;</span>
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The purposes of the three configuration files are as follows:</p>
<ul>
<li><code>./package.json</code> Installs the TypeScript package, preventing a host of inscrutable errors that will arise if it is absent.</li>
<li><code>./tsconfig.json</code> Instructs the TypeScript compiler on where to find source files, what to exclude, and how to process the files it finds. Comprehensive documentation on this file can be found <a href="https://www.typescriptlang.org/tsconfig" target="_blank">here</a>.</li>
<li><code>./.vscode/tasks.json</code> Adds a new task to VS Code (tsc) that detects type errors while running in the background.</li>
</ul>
<p>Alternatively, you can clone the <a href="">Typed JavaScript Project</a>, which includes everything needed to get started.</p>
<p>With all files in place, it&rsquo;s time to install the NPM dependencies:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm i
</span></span></code></pre></div><p>Before starting with Typed JavaScript, there&rsquo;s one final step. In VS Code, select the <code>Terminal</code> menu, then choose the <code>Run Task</code> option. Type <code>tsc</code> into the search bar and press enter. This runs the <code>tsc</code> (TypeScript compiler) task defined by the file at <code>./.vscode/tasks.json</code>.</p>
<p>The <code>tsc</code> task is a workaround to a <a href="https://github.com/microsoft/TypeScript/issues/21435" target="_blank">longstanding VS Code issue</a>. Although VS Code checks types in opened files, it does not check types in closed files. This means that if editing the current file leads to errors in other closed files, those errors will not show up in the Explorer panel. Many language have this feature, so its absence from TypeScript makes using Typed JavaScript harder that it needs to be. The task I provide synthesizes various workarounds reported on the GitHub page for the issue.</p>


<h1 class="relative group">Observations 
    <div id="observations" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#observations" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>I&rsquo;ve been using Typed JavaScript, as described here, for about a month on a no-framework web application project. Prior to that I dabbled with JSDoc type hints in VS Code. Years before that I built <a href="https://chemwriter.com" target="_blank">a complex JavaScript project</a> using Closure Tools. With this background in mind, I make the following miscellaneous observations:</p>
<ul>
<li>Avoid using <a href="https://www.typescriptlang.org/docs/handbook/declaration-files/templates/module-d-ts.html" target="_blank"><code>*.d.ts</code></a> files. These files are intended for external consumers of your libraries. I have run into hard-to-diagnose problems when trying to repurpose these files for internal use.</li>
<li>Typed JavaScript types work in the VS Code debugger.</li>
<li>A <code>typedef</code> without properties equals the any (<code>*</code>) type. This can be confusing because it looks like the <code>typedef</code> was not found. Be sure to give a <code>typedef</code> at least one property to make sure it&rsquo;s working.</li>
<li>Type hints in Typed JavaScript are much more syntactically verbose than in TypeScript. However, there are ways to cut down on the clutter. For example, a type hint can be tucked between a variable declaration keyword and its name (e.g., <code>let /** @type{string} */ myString;</code>)</li>
<li>VS Code can infer many types without type annotations. Learn where this applies to avoid cluttering your code with useless definitions.</li>
<li>Many languages will alert you to types that go unused, but Typed JavaScript will not.</li>
<li>There is no &ldquo;go to/open definition&rdquo; navigation in VS Code running Typed JavaScript. Although you can hover the name of a value to see its type, you can&rsquo;t navigate to its definition.</li>
<li>Error messages can be verbose. This applies most noticeably to <code>typedef</code> errors, where an entire struct is replicated in the error, causing considerable clutter.</li>
</ul>


<h1 class="relative group">Conclusion 
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#conclusion" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>Typed JavaScript offers many of the benefits of TypeScript, but without the disruption caused by a change of language. Implemented through JSDoc type tags and Visual Studio Code, Typed JavaScript requires no breaking syntax changes or unusual tools. As such, Typed JavaScript could offer an alternative for those cases in which TypeScript&rsquo;s costs are too high. Although Typed JavaScript is not new, it has so far lacked a name, comprehensive documentation, and a set of conventions for use. This article is a first attempt at addressing that problem.</p>

          
          
          
        </div>
        
        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_posts\/2021-10-20-types-without-typescript.md"
        var oid_likes = "likes_posts\/2021-10-20-types-without-typescript.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/articles/2021/10/06/molecular-graph-canonicalization/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Molecular Graph Canonicalization</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-10-06T17:30:00&#43;00:00">October 6, 2021</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/articles/2021/11/03/typed-javascript/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Typed JavaScript</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-11-03T13:30:00&#43;00:00">November 3, 2021</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2024
      
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
