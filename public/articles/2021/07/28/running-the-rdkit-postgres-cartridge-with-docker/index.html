<!DOCTYPE html>
<html lang="en-us" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en-us" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Running the RDKit Postgres Cartridge with Docker &middot; Depth-First</title>
  <meta name="title" content="Running the RDKit Postgres Cartridge with Docker &middot; Depth-First" />
  
  <meta name="description" content="Build structure-searchable databases on a versatile foundation." />
  
  
  
  <link rel="canonical" href="http://localhost:1313/articles/2021/07/28/running-the-rdkit-postgres-cartridge-with-docker/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.e27868ab1485f7ed7b06b122b4980bd38b19526eb8f7de885181204d28f04a0c47e9c334eff19a06c0278eb2ff8415b983a5d0fb80fd6b5680c926457cc61c57.css"
    integrity="sha512-4nhoqxSF9&#43;17BrEitJgL04sZUm64996IUYEgTSjwSgxH6cM07/GaBsAnjrL/hBW5g6XQ&#43;4D9a1aAySZFfMYcVw==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.c178288131a2f1ad46910438db47ac5f7e1c48cf949e49f6dc3310c8ec9660e23fe505805eba4e2e73711335808500360d773a2b64322feb35df52856edca286.js"
    integrity="sha512-wXgogTGi8a1GkQQ420esX34cSM&#43;Unkn23DMQyOyWYOI/5QWAXrpOLnNxEzWAhQA2DXc6K2QyL&#43;s131KFbtyihg==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S&#43;Yti0U7QtuZvQ=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/articles/2021/07/28/running-the-rdkit-postgres-cartridge-with-docker/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="Running the RDKit Postgres Cartridge with Docker">
  <meta property="og:description" content="Build structure-searchable databases on a versatile foundation.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-07-28T14:50:00+00:00">
    <meta property="article:modified_time" content="2021-07-28T14:50:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Running the RDKit Postgres Cartridge with Docker">
  <meta name="twitter:description" content="Build structure-searchable databases on a versatile foundation.">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Running the RDKit Postgres Cartridge with Docker",
    "headline": "Running the RDKit Postgres Cartridge with Docker",
    
    "abstract": "Build structure-searchable databases on a versatile foundation.",
    "inLanguage": "en-us",
    "url" : "http:\/\/localhost:1313\/articles\/2021\/07\/28\/running-the-rdkit-postgres-cartridge-with-docker\/",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    "copyrightYear": "2021",
    "dateCreated": "2021-07-28T14:50:00\u002b00:00",
    "datePublished": "2021-07-28T14:50:00\u002b00:00",
    
    "dateModified": "2021-07-28T14:50:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "2095"
  }]
  </script>


  
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  
  



  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Depth-First</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400" style="margin-right:5px">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" class="block">
            

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Running the RDKit Postgres Cartridge with Docker
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2021-07-28T14:50:00&#43;00:00">July 28, 2021</time><span class="px-2 text-primary-500">&middot;</span><span>2095 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">10 mins</span>
  

  
  
</div>








    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
  <div class="place-self-center">
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
    

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <p>Chemical structure databases have the odd distinction of being both ubiquitous and often non-trivial to implement. The defining characteristic of these systems is that records can be fetched based on exact- or substructure queries. Structure-searchable databases pops up in all kinds of contexts ranging from individual research projects to on-off data processing tasks to drug discovery efforts to analytical labs to small chemical businesses. The need for a proper chemical database can sneak up on you rather quickly. This article addresses the problem by demonstrating a simple, fast method to get up and running with a structure-searchable database.</p>


<h1 class="relative group">Preview 
    <div id="preview" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#preview" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>By the end of this article, you&rsquo;ll be able to quickly query a database of over one million records using SMILES queries like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> id, molecule
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> molecules
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">where</span> molecule <span style="color:#f92672">@&gt;</span> <span style="color:#e6db74">&#39;c1ccccc1&#39;</span>;
</span></span></code></pre></div>

<h1 class="relative group">Database Cartridges 
    <div id="database-cartridges" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#database-cartridges" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>The single most popular tool for building a chemical structure database at scale is the <em>database cartridge</em>. A database cartridge (aka &ldquo;extension&rdquo;) is a piece of software that operates within a general-purpose database system, orchestrating inputs and outputs relating to chemical information. Examples of general-purpose database systems include: <a href="https://www.postgresql.org" target="_blank">Postgres</a>; <a href="https://www.mysql.com" target="_blank">MySQL</a>; <a href="https://mariadb.com" target="_blank">MariaDB</a>; Oracle; and <a href="https://www.mongodb.com" target="_blank">MongoDB</a>. All except the last of these are considered <a href="https://en.wikipedia.org/wiki/Relational_database" target="_blank">relational database management systems</a> (RDBMSs).</p>
<p>A cartridge extends a general-purpose database system in two main ways: (1) with new data types; and (2) with new functions operating over the new data types. The most important new datatype supported by a cartridge is likely to be a molecular representation. With it, a variety of new functions can be performed, including exact- and substructure comparisons. Supporting data types such as molecular fingerprints and functions for using them are also likely to be included.</p>
<p>Cartridges aren&rsquo;t the only game in town. For example, databases are rarely used in isolation. Typically they&rsquo;re controlled by other software such as an application layer. So one alternative to a cartridge would be to locate the chemistry-specific code within the application layer. Alternatively a dedicated chemical database system could be used, with the application layer orchestrating the interaction between it and a general-purpose database.</p>
<p>There are, however, a few reasons to favor a database cartridge over the alternatives. The main one is simplicity. With no chemistry-specific data manipulation to perform, the application layer can focus on business logic and user interface. This separation of concerns can lead to cleaner code and separation of concerns. The end result can be better long-term maintainability.</p>
<p>Typically, a cartridge pairs a cheminformatics toolkit with a database implementation. Examples include:</p>
<ul>
<li><a href="http://bioinfo.uochb.cas.cz/sachem/" target="_blank">Sachem</a>. Postgres/CDK.</li>
<li><a href="https://lifescience.opensource.epam.com/bingo/index.html" target="_blank">Bingo</a>. Postgres and SQL Server/Indigo.</li>
<li><a href="https://docs.chemaxon.com/display/docs/jchem-cartridge.md" target="_blank">JChem Cartridge</a>. Oracle and Postgres/JChem.</li>
<li><a href="https://mychem.github.io" target="_blank">Mychem</a> MariaDB/Open Babel.</li>
<li><a href="http://orchem.sourceforge.net" target="_blank">OrChem</a>. Oracle/CDK.</li>
<li><a href="https://www.rdkit.org/docs/Cartridge.html" target="_blank">RDkit Postgres</a>. Postgres/RDKit.</li>
</ul>
<p>The last option, RDKit Postgres, is the topic of today&rsquo;s article. Most of the documentation, including <a href="https://www.rdkit.org/docs/Cartridge.html" target="_blank">the homepage</a>, assumes an installation. But what if you don&rsquo;t have one? Depending on your target operating system, compiling the RDKit Postgres cartridge from source and installing it is likely to pose challenges. This is especially true of your system holds configurations you&rsquo;d rather not disturb.</p>
<p>Fortunately, there&rsquo;s a solution to this problem.</p>


<h1 class="relative group">Docker 
    <div id="docker" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#docker" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p><a href="https://www.docker.com" target="_blank">Docker</a> is a deployment utility designed for complex, multi-component software projects. In other words, it can solve exactly the problem faced by those who want to install the RDKit Postgres cartridge. With Docker, the entire database system, including Postgres and RDKit, and all required dependencies, can be bundled into a single &ldquo;container.&rdquo; What&rsquo;s more, that same container will run, unmodified, on any host operating system. You can use exactly the same version and configuration of RDKit/Postgres on a local development machine as you deploy to the cloud.</p>
<p>What&rsquo;s the tradeoff? Docker may be simple to use by following tutorials like this one, but it&rsquo;s not easy to understand. If you plan on using Docker for any production work, I recommend learning the theory behind Docker through a book or online course. Even if you&rsquo;re just experimenting, learning broadly about Docker can ultimately save you time and effort you&rsquo;d otherwise spend reinventing the wheel. Using Docker effectively means knowing something about how it works, Linux system administration, and the many options that are available for automating deployment workflows. A free excerpt of a paid course I found especially helpful can be found on YouTube.</p>
<!-- raw HTML omitted -->
<p>On the Docker website can be found a page explaining <a href="https://docs.docker.com/get-docker/" target="_blank">how to install docker for your platform</a>.</p>


<h1 class="relative group">The RDKit Postgres Docker Image 
    <div id="the-rdkit-postgres-docker-image" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#the-rdkit-postgres-docker-image" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>A <a href="https://hub.docker.com/r/mcs07/postgres-rdkit" target="_blank">Docker image</a> including a complete RDKit Postgres installation has been built and distributed by <a href="https://matt-swain.com" target="_blank">Matt Swain</a>. Before using it, however, there&rsquo;s one more thing you&rsquo;ll need.</p>


<h1 class="relative group">Postgres Client 
    <div id="postgres-client" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#postgres-client" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>To interact with the RDKit/Postgres container, you&rsquo;ll need a <a href="https://wiki.postgresql.org/wiki/PostgreSQL_Clients" target="_blank">Postgres client</a>. You can check for its presence with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>psql --help
</span></span></code></pre></div><p>If you receive version information, the client is already installed. Otherwise, you&rsquo;ll need to install one.</p>


<h1 class="relative group">Quickstart 
    <div id="quickstart" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#quickstart" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>The simplest way to start is to launch the RDKit cartridge container from the command line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run --name mypostgres -p 5432:5432 -e POSTGRES_PASSWORD<span style="color:#f92672">=</span>mypassword -d mcs07/postgres-rdkit
</span></span></code></pre></div><p>The following options are used:</p>
<ul>
<li><code>run</code>. Tells Docker to run the image.</li>
<li><code>--name</code>. Sets the name of the container that will be running to <code>mypostgres</code>.</li>
<li><code>-p</code>. Exposes port 5432 of the container as port 5432 on your local machine.</li>
<li><code>-e</code>. Allows the environment variable <code>POSTGRES_PASSWORD</code> to be set. This will become the password you&rsquo;ll need when using the Postgres client to connect to the database.</li>
<li><code>-d</code>. Return without blocking the terminal, allowing you to continue with the session.</li>
</ul>
<p>After the container is running, open a new terminal and connect to the database with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>psql -h localhost -U postgres -p <span style="color:#ae81ff">5432</span>
</span></span></code></pre></div><p>When prompted, use the same password used to run the container, &ldquo;mypassword&rdquo;. You should see a Postgres prompt.</p>
<pre tabindex="0"><code>psql -h localhost -U postgres
Password for user postgres: 
psql (13.3, server 12.3 (Debian 12.3-1.pgdg100+1))
Type &#34;help&#34; for help.

postgres=#
</code></pre><p>The Postgres session can be exited by pressing <code>ctrl-d</code>.</p>
<p>The RDkit cartridge container can be run even if Postgres is currently installed. However, if a Postgres server is already running, you&rsquo;ll see an error message. There are two ways to proceed: (1) stop the Postgres server on your system; or (2) use a port other than the default Postgres port of 5432.</p>
<p>You can stop the Postgres cartridge Docker container at any time with the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker container stop &lt;id&gt;
</span></span></code></pre></div><p>where <code>&lt;id&gt;</code> is the identifier of the running container. To get it, use <code>docker ps</code>. For example, here&rsquo;s the output on my system:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                  COMMAND                  CREATED          STATUS          PORTS                                       NAMES
</span></span><span style="display:flex;"><span>fe320ea9182f   mcs07/postgres-rdkit   <span style="color:#e6db74">&#34;docker-entrypoint.s…&#34;</span>   <span style="color:#ae81ff">10</span> minutes ago   Up <span style="color:#ae81ff">10</span> minutes   0.0.0.0:5432-&gt;5432/tcp, :::5432-&gt;5432/tcp   mypostgres
</span></span></code></pre></div><p>To stop the container I started 10 minutes ago, I can use the value under <code>CONTAINER ID</code>, or the first few digits:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker container stop fe3
</span></span></code></pre></div><p>Everything possible in Docker can be accomplished through the command line. However, things can get complicated very quickly, especially when multiple containers need to be managed and work together. Enter <a href="https://docs.docker.com/compose/" target="_blank">Docker Compose</a>, an orchestration utility that uses simple configuration files to &ldquo;compose&rdquo; containers. I point this out only because the RDKit Postgres container documentation mentions it. For now, Docker Compose is overkill so let&rsquo;s continue to use the command line.</p>


<h1 class="relative group">A Simplification 
    <div id="a-simplification" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#a-simplification" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>In the following section, we&rsquo;ll be issuing a number of commands to the Postgres server running on the container. The server will require the entry of a password for each one, which can get tiring very fast. Other information will need to be passed on the command line. We can avoid this inconvenience by setting the following environment variables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export PGPASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mypassword&#34;</span>
</span></span><span style="display:flex;"><span>export PGHOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;localhost&#34;</span>
</span></span><span style="display:flex;"><span>export PGUSER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;postgres&#34;</span>
</span></span></code></pre></div><p>Now we can connect to the server with the much simpler command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>psql
</span></span><span style="display:flex;"><span>psql (13.3, server 12.3 (Debian 12.3-1.pgdg100+1))
</span></span><span style="display:flex;"><span>Type &#34;help&#34; for help.
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>postgres=#
</span></span></code></pre></div><p>In the next section we&rsquo;ll be working outside of Postgres. Exit your <code>psql</code> session with <code>ctrl-d</code>.</p>


<h1 class="relative group">Searching a Million Molecules 
    <div id="searching-a-million-molecules" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#searching-a-million-molecules" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>As a test of Postgres and its cartridge, let&rsquo;s add a million molecules to a database and then perform a substructure search. The <a href="https://www.rdkit.org/docs/Cartridge.html" target="_blank">RDKit Cartridge documentation</a> shows one way to do this that will be adapted here.</p>
<p>The process starts by creating a database using the <code>createdb</code> utility that comes with the Postgres client. Postgres won&rsquo;t install the cartridge on new databases by default, so we&rsquo;ll create one in a bash session.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>createdb emolecules
</span></span><span style="display:flex;"><span>psql -c <span style="color:#e6db74">&#39;create extension rdkit&#39;</span> emolecules
</span></span><span style="display:flex;"><span>psql -c <span style="color:#e6db74">&#39;create table raw_data (id SERIAL, smiles text, version_id integer, parent_id integer)&#39;</span> emolecules
</span></span></code></pre></div><p>The <code>-c</code> option tells Postgres to issue the commands that follow in quotes. Alternatively, the commands could be issued from within a <code>psql</code> session. However, it&rsquo;s convenient work this way because of what comes next.</p>
<p><a href="https://www.emolecules.com" target="_blank">eMolecules</a> provides <a href="https://downloads.emolecules.com/free/2021-07-01/" target="_blank">downloads</a> of its public database in several formats. For the purposes of this demonstration, the most convenient format is a SMILES file containing records whose fields include a SMILES structure and two corresponding identifiers (&ldquo;VERSION_ID&rdquo; and &ldquo;PARENT_ID&rdquo;). Download and expand as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget https://downloads.emolecules.com/free/2021-07-01/version.smi.gz
</span></span><span style="display:flex;"><span>gunzip version.smi.gz
</span></span></code></pre></div><p>This generates the file <code>version.smi</code>, which contains many millions of records. We want only the first million, which can be done with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>head -n <span style="color:#ae81ff">1000001</span> version.smi &gt;&gt; emolecules-1m.smi
</span></span></code></pre></div><p>The resulting file, <code>emolecules-1m.smi</code> contains the first million records. We take the first 1,000,001 of them because the first row is a header. The new file can be imported into the <code>emolecules</code> Postgres database as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat &lt; ./emolecules-1m.smi | sed <span style="color:#e6db74">&#39;1d; s/\\/\\\\/g&#39;</span> | psql -c <span style="color:#e6db74">&#34;copy raw_data (smiles,version_id,parent_id) from stdin with delimiter &#39; &#39;&#34;</span> emolecules
</span></span></code></pre></div><p>Here we&rsquo;re reading the <code>emolecules-1m.smi</code>, replacing input inline, and piping the result into the Postgres <code>emolecules</code> database. The <code>sed</code> parameter <code>1d'</code> strips the first line of input, which is a header. The remaining <code>sed</code> input (<code>s/\\/\\\\/g</code>) replaces backslash characters in the SMILES strings with escaped backslash characters so that Postgres can process them. The command takes a few seconds to execute on my system.</p>
<p>Confirm that the <code>raw_data</code> table has been created with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>psql emolecules
</span></span><span style="display:flex;"><span>psql (13.3, server 12.3 (Debian 12.3-1.pgdg100+1))
</span></span><span style="display:flex;"><span>Type &#34;help&#34; for help.
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>emolecules=# select count(*) from raw_data;
</span></span><span style="display:flex;"><span>  count  
</span></span><span style="display:flex;"><span>---------
</span></span><span style="display:flex;"><span> 1000000
</span></span><span style="display:flex;"><span>(1 row)
</span></span></code></pre></div><p>To keep things efficient, we&rsquo;re using a two-step strategy. The purpose of the first step is to replicate the data found in the <code>emolecules-1m.smi</code> file within the Postgres table <code>raw_data</code>. Having moved the data into Postgres, we then process it with the RDKit cartridge. We&rsquo;re going to be moving a lot of data around, so it helps to first move the raw data into Postgres, from where it can be dispatched efficiently. We can always drop the <code>raw_data</code> table later. The following query, executed within a Postgres session (<code>psql emolecules</code>) will create a new table <code>molecules</code> with searchable structures.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">INTO</span> molecules
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">FROM</span> (<span style="color:#66d9ef">SELECT</span> id, mol_from_smiles(smiles::cstring) <span style="color:#66d9ef">structure</span> <span style="color:#66d9ef">FROM</span> raw_data) tmp
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">structure</span> <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>;
</span></span></code></pre></div><p>This step, which creates RDKit binary molecular representations, will take several minutes. You should see some output similar to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>WARNING:  could not create molecule from SMILES &#39;Br[Br]Br.c1ccncc1&#39;
</span></span><span style="display:flex;"><span>WARNING:  could not create molecule from SMILES &#39;Br[Br-]Br.C[N+](C)(C)c1ccccc1&#39;
</span></span><span style="display:flex;"><span>... and so on
</span></span></code></pre></div><p>Here the cartridge is informing us that RDKit was not able to read the indicated SMILES.</p>
<p>After the command returns, a new table, <code>molecules</code>, will have been created. It contains two columns (<code>id</code>, <code>structure</code>), which can be confirmed with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>\d+ molecules;
</span></span><span style="display:flex;"><span>                                   Table &#34;public.molecules&#34;
</span></span><span style="display:flex;"><span>  Column   |  Type   | Collation | Nullable | Default | Storage  | Stats target | Description 
</span></span><span style="display:flex;"><span>-----------+---------+-----------+----------+---------+----------+--------------+-------------
</span></span><span style="display:flex;"><span> id        | integer |           |          |         | plain    |              | 
</span></span><span style="display:flex;"><span> structure | mol     |           |          |         | extended |              | 
</span></span><span style="display:flex;"><span>Access method: heap
</span></span></code></pre></div><p>Notice the type of the <code>structure</code> field: <code>mol</code>. This is a custom data type that the cartridge can read, write, and process.</p>
<p>Searching this table by structure is going to be slow (something that&rsquo;s worth confirming for yourself). To speed things up, we can create an index. This index is created with help from the cartridge, which knows about the <code>mol</code> data type and can use it in various ways.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> molecules_structure <span style="color:#66d9ef">ON</span> molecules <span style="color:#66d9ef">USING</span> gist(<span style="color:#66d9ef">structure</span>);
</span></span></code></pre></div><p>This step again takes about ten minutes on my system. Finally, we can search by structure:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> id, <span style="color:#66d9ef">structure</span> <span style="color:#66d9ef">FROM</span> molecules <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">structure</span><span style="color:#f92672">@&gt;</span><span style="color:#e6db74">&#39;c1cccnc1&#39;</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- returns results like the following
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">--    id   |                           structure                            
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- --------+----------------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 312845 | Cc1nc(C)c(C(=O)N/N=C/c2cccnc2)cc1C(=O)N/N=C/c1cccnc1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 319086 | CCOC(=O)CCSc1nc(-c2ccc(C)cc2)cc(-c2ccc(OC)cc2)c1C#N
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 319094 | COc1ccc(-c2cc(-c3ccc(C)cc3)nc(SCC(=O)Nc3ccc(C)cc3C)c2C#N)cc1OC
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 319095 | COc1ccc(-c2cc(-c3ccc(C)cc3)nc(SCC(=O)Nc3c(C)cccc3C)c2C#N)cc1OC
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- and so on...
</span></span></span></code></pre></div><p>As you experiment with the <code>LIMIT</code> parameter and other SQL features, you may find yourself wanting to know how long various queries take. This can be accomplished by turning timings on:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>\timing
</span></span></code></pre></div>

<h1 class="relative group">Conclusion 
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#conclusion" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<p>Setting up a robust, substructure-searchable database can be a big technical challenge. In many situations, a database cartridge like RDKit Postgres offers an excellent option. This article describes a simple, unobtrusive method using Docker to run the RDKit cartridge on most systems.</p>

          
          
          
        </div>
        
        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_posts\/2021-07-28-rdkit-postgres-cartridge.md"
        var oid_likes = "likes_posts\/2021-07-28-rdkit-postgres-cartridge.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/articles/2021/07/14/the-trouble-with-h%C3%BCckel/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >The Trouble with Hückel</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-07-14T04:30:00&#43;00:00">July 14, 2021</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/articles/2021/08/11/the-rdkit/postgres-ordered-substructure-search-problem/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >The RDKit/Postgres Ordered Substructure Search Problem</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-08-11T15:00:00&#43;00:00">August 11, 2021</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2024
      
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
