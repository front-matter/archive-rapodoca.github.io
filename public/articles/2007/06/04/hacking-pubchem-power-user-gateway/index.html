<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Hacking PubChem - Power User Gateway | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="If you&rsquo;ve been waiting for a simple way to programatically query PubChem without screen scraping, the wait is over. An (apparently) new service called the Power User Gateway (PUG) now offers a direct, XML-based PubChem data channel.
See PUG
Previous articles have discussed various methods for hacking PubChem: screen scraping (link, link); with the Entrez Utilities; and by simply replicating the database. PUG is different in that it is both very simple and apparently quite powerful.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/articles/2007/06/04/hacking-pubchem-power-user-gateway/">
    

    <meta property="og:url" content="http://localhost:1313/articles/2007/06/04/hacking-pubchem-power-user-gateway/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="Hacking PubChem - Power User Gateway">
  <meta property="og:description" content="If you’ve been waiting for a simple way to programatically query PubChem without screen scraping, the wait is over. An (apparently) new service called the Power User Gateway (PUG) now offers a direct, XML-based PubChem data channel.
See PUG Previous articles have discussed various methods for hacking PubChem: screen scraping (link, link); with the Entrez Utilities; and by simply replicating the database. PUG is different in that it is both very simple and apparently quite powerful.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2007-06-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2007-06-04T00:00:00+00:00">

  <meta itemprop="name" content="Hacking PubChem - Power User Gateway">
  <meta itemprop="description" content="If you’ve been waiting for a simple way to programatically query PubChem without screen scraping, the wait is over. An (apparently) new service called the Power User Gateway (PUG) now offers a direct, XML-based PubChem data channel.
See PUG Previous articles have discussed various methods for hacking PubChem: screen scraping (link, link); with the Entrez Utilities; and by simply replicating the database. PUG is different in that it is both very simple and apparently quite powerful.">
  <meta itemprop="datePublished" content="2007-06-04T00:00:00+00:00">
  <meta itemprop="dateModified" content="2007-06-04T00:00:00+00:00">
  <meta itemprop="wordCount" content="518">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hacking PubChem - Power User Gateway">
  <meta name="twitter:description" content="If you’ve been waiting for a simple way to programatically query PubChem without screen scraping, the wait is over. An (apparently) new service called the Power User Gateway (PUG) now offers a direct, XML-based PubChem data channel.
See PUG Previous articles have discussed various methods for hacking PubChem: screen scraping (link, link); with the Entrez Utilities; and by simply replicating the database. PUG is different in that it is both very simple and apparently quite powerful.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Articles
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Hacking PubChem - Power User Gateway</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2007-06-04T00:00:00Z">June 4, 2007</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>If you&rsquo;ve been waiting for a simple way to programatically query PubChem without screen scraping, the wait is over. An (apparently) new service called the Power User Gateway (PUG) now offers a direct, XML-based PubChem data channel.</p>
<h1 id="see-pug">See PUG</h1>
<p>Previous articles have discussed various methods for hacking PubChem: screen scraping (<a href="http://depth-first.com/articles/2006/08/30/hacking-pubchem-with-ruby">link</a>, <a href="http://depth-first.com/articles/2006/08/30/hacking-pubchem-with-ruby">link</a>); with the <a href="http://depth-first.com/articles/2006/09/23/hacking-pubchem-entrez-programming-utilities">Entrez Utilities</a>; and by simply <a href="http://depth-first.com/articles/2006/09/29/hacking-pubchem-direct-access-with-ftp">replicating the database</a>. PUG is different in that it is both very simple and apparently quite powerful.</p>
<p>From the <a href="ftp://ftp.ncbi.nlm.nih.gov/pubchem/specifications/pubchem_pug.txt">PUG documentation</a>:</p>
<blockquote>
<p>&hellip; There is a single CGI (pug.cgi, referred to hereafter as simply PUG) that is the central gateway to multiple PubChem functions. PUG takes no URL arguments; all communication with PUG is done by XML. To perform any request, you will formulate your input in XML and then HTTP POST it to PUG. The CGI interprets your incoming request, initiates the appropriate action, then returns results (also) in XML format. &hellip;</p>
</blockquote>
<h1 id="see-pug-run">See PUG Run</h1>
<p>Let&rsquo;s perform a simple query using PUG. As the documentation states, all communication with PUG is done through HTTP POST. In contrast to other approaches to interfacing with PubChem, parameters and results are encoded in raw XML, the schema for which is available <a href="ftp://ftp.ncbi.nlm.nih.gov/pubchem/specifications/pug.xsd">here</a>. To use PUG your first step is to locate software capable of encoding this form of HTTP request.</p>
<p><a href="http://curl.haxx.se/">cURL</a> is such a utility. Among many capabilities, cURL offers a quick and easy way to POST XML to a server and view the response. For example, to POST the file called <strong>foo.xml</strong> to PUG, the command would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -d @foo.xml <span style="color:#e6db74">&#34;http://pubchem.ncbi.nlm.nih.gov/pug/pug.cgi&#34;</span>
</span></span></code></pre></div><p>Our query will request PubChem&rsquo;s first fifty Compounds in <a href="http://depth-first.com/articles/2006/09/29/hacking-pubchem-direct-access-with-ftp">sdf.gz</a> format.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;PCT-Data&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;PCT-Data_input&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PCT-InputData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PCT-InputData_download&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PCT-Download&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Download_uids&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;PCT-QueryUids&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;PCT-QueryUids_ids&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;PCT-ID-List&gt;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">&lt;PCT-ID-List_db&gt;</span>pccompound<span style="color:#f92672">&lt;/PCT-ID-List_db&gt;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">&lt;PCT-ID-List_uids&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;PCT-ID-List_uids_E&gt;</span>1<span style="color:#f92672">&lt;/PCT-ID-List_uids_E&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;PCT-ID-List_uids_E&gt;</span>50<span style="color:#f92672">&lt;/PCT-ID-List_uids_E&gt;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">&lt;/PCT-ID-List_uids&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/PCT-ID-List&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;/PCT-QueryUids_ids&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/PCT-QueryUids&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/PCT-Download_uids&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Download_format</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;sdf&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Download_compression</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;gzip&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/PCT-Download&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/PCT-InputData_download&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PCT-InputData&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/PCT-Data_input&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/PCT-Data&gt;</span>
</span></span></code></pre></div><p>After saving this file as <code>pugtest.xml</code>, we can POST it to PUG using cURL:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -d @pugtest.xml <span style="color:#e6db74">&#34;http://pubchem.ncbi.nlm.nih.gov/pug/pug.cgi&#34;</span>
</span></span></code></pre></div><h1 id="run-pug-run">Run PUG, Run!</h1>
<p>After POSTing our query, PUG gives one of two possible responses: we&rsquo;re informed of the status of our query, or we&rsquo;re given a URL to download our results.</p>
<p>Here&rsquo;s an example of a status result:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE PCT-Data PUBLIC &#34;-//NCBI//NCBI PCTools/EN&#34; &#34;http://pubchem.ncbi.nlm.nih.gov/pug/pug.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;PCT-Data&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;PCT-Data_output&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PCT-OutputData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PCT-OutputData_status&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PCT-Status-Message&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Status-Message_status&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;PCT-Status</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;success&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/PCT-Status-Message_status&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/PCT-Status-Message&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/PCT-OutputData_status&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PCT-OutputData_output&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PCT-OutputData_output_waiting&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Waiting&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;PCT-Waiting_reqid&gt;</span>638302818484957496<span style="color:#f92672">&lt;/PCT-Waiting_reqid&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/PCT-Waiting&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/PCT-OutputData_output_waiting&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/PCT-OutputData_output&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PCT-OutputData&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/PCT-Data_output&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/PCT-Data&gt;</span>
</span></span></code></pre></div><p>The <!-- raw HTML omitted -->PCT-Waiting_reqid<!-- raw HTML omitted --> informs us of our query&rsquo;s ID. We could then prepare and POST another query to monitor its status:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;PCT-Data&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;PCT-Data_input&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PCT-InputData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PCT-InputData_request&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PCT-Request&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Request_reqid&gt;</span>638302818484957496<span style="color:#f92672">&lt;/PCT-Request_reqid&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Request_type</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;status&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/PCT-Request&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/PCT-InputData_request&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PCT-InputData&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/PCT-Data_input&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/PCT-Data&gt;</span>
</span></span></code></pre></div><p>Eventually, we&rsquo;ll get a response containing a <!-- raw HTML omitted -->PCT-Download_URL_url<!-- raw HTML omitted --> element. Inside this element is the URL through which we can download our results:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE PCT-Data PUBLIC &#34;-//NCBI//NCBI PCTools/EN&#34; &#34;http://pubchem.ncbi.nlm.nih.gov/pug/pug.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;PCT-Data&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;PCT-Data_output&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PCT-OutputData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PCT-OutputData_status&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PCT-Status-Message&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Status-Message_status&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;PCT-Status</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;success&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/PCT-Status-Message_status&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/PCT-Status-Message&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/PCT-OutputData_status&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PCT-OutputData_output&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PCT-OutputData_output_download-url&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;PCT-Download-URL&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;PCT-Download-URL_url&gt;</span>ftp://ftp-private.ncbi.nlm.nih.gov/pubchem/.fetch/766964770894289974.sdf.gz<span style="color:#f92672">&lt;/PCT-Download-URL_url&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/PCT-Download-URL&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/PCT-OutputData_output_download-url&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/PCT-OutputData_output&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PCT-OutputData&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/PCT-Data_output&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/PCT-Data&gt;</span>
</span></span></code></pre></div><h1 id="conclusions">Conclusions</h1>
<p>PUG offers the basic foundation for building a variety of innovative and useful cheminformatics Web services. But before that can happen, high-level APIs will be needed in languages like Ruby, Python, and Java. With these APIs in hand, what kinds of applications will result? Fortunately, imagination is now the only barrier.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
