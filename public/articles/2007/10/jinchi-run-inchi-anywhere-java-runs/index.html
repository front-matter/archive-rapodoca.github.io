<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>JInChI - Run InChI Anywhere Java Runs | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Regardless of your views on Java the Programming Language, Java the Platform has a lot going for it. The ability to run the same executable on any system with a Java Virtual Machine (JVM), without recompilation, is a significant advantage in today&rsquo;s heterogeneous computing environment. Combine that with Java the Platform&rsquo;s battle-tested security model, stability and performance, and you have some compelling reasons to actually prefer that code execute on a JVM rather than bare metal.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/articles/2007/10/jinchi-run-inchi-anywhere-java-runs/">
    

    <meta property="og:url" content="http://localhost:1313/articles/2007/10/jinchi-run-inchi-anywhere-java-runs/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="JInChI - Run InChI Anywhere Java Runs">
  <meta property="og:description" content="Regardless of your views on Java the Programming Language, Java the Platform has a lot going for it. The ability to run the same executable on any system with a Java Virtual Machine (JVM), without recompilation, is a significant advantage in today’s heterogeneous computing environment. Combine that with Java the Platform’s battle-tested security model, stability and performance, and you have some compelling reasons to actually prefer that code execute on a JVM rather than bare metal.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2007-10-31T00:00:00+00:00">
    <meta property="article:modified_time" content="2007-10-31T00:00:00+00:00">

  <meta itemprop="name" content="JInChI - Run InChI Anywhere Java Runs">
  <meta itemprop="description" content="Regardless of your views on Java the Programming Language, Java the Platform has a lot going for it. The ability to run the same executable on any system with a Java Virtual Machine (JVM), without recompilation, is a significant advantage in today’s heterogeneous computing environment. Combine that with Java the Platform’s battle-tested security model, stability and performance, and you have some compelling reasons to actually prefer that code execute on a JVM rather than bare metal.">
  <meta itemprop="datePublished" content="2007-10-31T00:00:00+00:00">
  <meta itemprop="dateModified" content="2007-10-31T00:00:00+00:00">
  <meta itemprop="wordCount" content="773">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="JInChI - Run InChI Anywhere Java Runs">
  <meta name="twitter:description" content="Regardless of your views on Java the Programming Language, Java the Platform has a lot going for it. The ability to run the same executable on any system with a Java Virtual Machine (JVM), without recompilation, is a significant advantage in today’s heterogeneous computing environment. Combine that with Java the Platform’s battle-tested security model, stability and performance, and you have some compelling reasons to actually prefer that code execute on a JVM rather than bare metal.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Articles
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">JInChI - Run InChI Anywhere Java Runs</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2007-10-31T00:00:00Z">October 31, 2007</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Regardless of your views on Java the Programming Language, Java the Platform has a lot going for it. The ability to run the same executable on any system with a Java Virtual Machine (JVM), without recompilation, is a significant advantage in today&rsquo;s heterogeneous computing environment. Combine that with Java the Platform&rsquo;s battle-tested security model, stability and performance, and you have some compelling reasons to actually prefer that code execute on a JVM rather than bare metal.</p>
<p>Cheminformatics has many useful libraries, legacy and otherwise, that don&rsquo;t yet run on a JVM. Many of these can trace their roots back to the 1960s and 1970s and FORTRAN; others were written in C or C++ more recently. What they all have in common is that they&rsquo;re compiled to native binaries rather than Java bytecode.</p>
<p>Wouldn&rsquo;t it be great if this software could be easily compiled to Java bytecode instead?</p>
<p>A recent Depth-First article described how the <a href="http://www.iupac.org/inchi/">InChI toolkit</a>, an open source C library distributed by IUPAC, <a href="/articles/2007/10/29/compiling-the-inchi-toolkit-to-pure-java-bytecode-with-nestedvm">was successfully compiled to a Java classfile</a> with the remarkable <a href="http://nestedvm.ibex.org/">NestedVM</a> library. This article describes the creation and use of a new platform-independent jarfile that runs the InChI program.</p>
<p>The procedure was not difficult. The two files previously released ( <a href="http://downloads.sourceforge.net/ninja/JInChI.class?modtime=1193672654&amp;big_mirror=0">JInChI.class</a> and <a href="http://downloads.sourceforge.net/ninja/nestedvm.jar?modtime=1193673646&amp;big_mirror=0">nestedvm.jar</a>) were combined into a single executable jarfile with a Manifest pointing to the JInChI classfile as the Main class.</p>
<p>The full cInChI jarfile can be <a href="http://sourceforge.net/project/showfiles.php?group_id=142870&amp;package_id=250448&amp;release_id=550857">downloaded here</a>.</p>
<p>The <code>jinchi.jar</code> file can be tested from the command line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ java -jar jinchi.jar
</span></span><span style="display:flex;"><span>InChI ver 1, Software version 1.01 release 07/21/2006.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Usage:
</span></span><span style="display:flex;"><span>cInChI-1 inputFile <span style="color:#f92672">[</span>outputFile <span style="color:#f92672">[</span>logFile <span style="color:#f92672">[</span>problemFile<span style="color:#f92672">]]]</span> <span style="color:#f92672">[</span>-option<span style="color:#f92672">[</span> -option...<span style="color:#f92672">]]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Options:
</span></span><span style="display:flex;"><span>  SNon        Exclude stereo <span style="color:#f92672">(</span>Default: Include Absolute stereo<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  SRel        Relative stereo
</span></span><span style="display:flex;"><span>  SRac        Racemic stereo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>truncated<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>If we wanted to process a molfile representing toluene, we&rsquo;d use something like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar jinchi.jar test/toluene.mol
</span></span><span style="display:flex;"><span>InChI version 1, Software version 1.01 release 07/21/2006
</span></span><span style="display:flex;"><span>Opened log file <span style="color:#e6db74">&#39;test/toluene.mol.log&#39;</span>
</span></span><span style="display:flex;"><span>Opened input file <span style="color:#e6db74">&#39;test/toluene.mol&#39;</span>
</span></span><span style="display:flex;"><span>Opened output file <span style="color:#e6db74">&#39;test/toluene.mol.txt&#39;</span>
</span></span><span style="display:flex;"><span>Opened problem file <span style="color:#e6db74">&#39;test/toluene.mol.prb&#39;</span>
</span></span><span style="display:flex;"><span>Options: Mobile H Perception ON
</span></span><span style="display:flex;"><span>Isotopic ON, Absolute Stereo ON
</span></span><span style="display:flex;"><span>Omit undefined/unknown stereogenic centers and bonds
</span></span><span style="display:flex;"><span>Full Aux. info
</span></span><span style="display:flex;"><span>Input format: MOLfile
</span></span><span style="display:flex;"><span>Output format: Plain text
</span></span><span style="display:flex;"><span>Timeout per structure: 60.000 sec; Up to <span style="color:#ae81ff">1024</span> atoms per structure
</span></span><span style="display:flex;"><span>End of file detected after structure <span style="color:#75715e">#1.</span>
</span></span><span style="display:flex;"><span>Finished processing <span style="color:#ae81ff">1</span> structure: <span style="color:#ae81ff">0</span> errors, processing time 0:00:00.00
</span></span></code></pre></div><p>This command would produce the following output file, just like the cInChI program:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat test/toluene.mol.txt
</span></span><span style="display:flex;"><span>* Input_File: <span style="color:#e6db74">&#34;test/toluene.mol&#34;</span>
</span></span><span style="display:flex;"><span>Structure: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>InChI<span style="color:#f92672">=</span>1/C7H8/c1-7-5-3-2-4-6-7/h2-6H,1H3
</span></span><span style="display:flex;"><span>AuxInfo<span style="color:#f92672">=</span>1/0/N:1,2,3,4,5,6,7/E:<span style="color:#f92672">(</span>3,4<span style="color:#f92672">)(</span>5,6<span style="color:#f92672">)</span>/rA:7nCCCCCCC/rB:;d2;s2;s3;d4;s1d5s6;/rC:3.6373,2.8,0;0,.7,0;0,2.1,0;1.2124,0,0;1.2124,2.8,0;2.4249,.7,0;2.4249,2.1,0;
</span></span></code></pre></div><p>We can also convert InChIs into molfiles (command line options work the same as in cInChI):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar jinchi.jar test/toluene.mol.txt -OutputSDF
</span></span><span style="display:flex;"><span>InChI version 1, Software version 1.01 release 07/21/2006
</span></span><span style="display:flex;"><span>Opened log file <span style="color:#e6db74">&#39;test/toluene.mol.txt.log&#39;</span>
</span></span><span style="display:flex;"><span>Opened input file <span style="color:#e6db74">&#39;test/toluene.mol.txt&#39;</span>
</span></span><span style="display:flex;"><span>Opened output file <span style="color:#e6db74">&#39;test/toluene.mol.txt.txt&#39;</span>
</span></span><span style="display:flex;"><span>Opened problem file <span style="color:#e6db74">&#39;test/toluene.mol.txt.prb&#39;</span>
</span></span><span style="display:flex;"><span>Options: Output SDfile only
</span></span><span style="display:flex;"><span>End of file detected after structure <span style="color:#75715e">#1.</span>
</span></span><span style="display:flex;"><span>Finished processing <span style="color:#ae81ff">1</span> structure: <span style="color:#ae81ff">0</span> errors, processing time 0:00:00.00
</span></span></code></pre></div><p>In this case the output is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat test/toluene.mol.txt.txt
</span></span><span style="display:flex;"><span>Structure <span style="color:#75715e">#1</span>
</span></span><span style="display:flex;"><span>  InChI v1 SDfile Output
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">1</span> V2000
</span></span><span style="display:flex;"><span>    3.6373    2.8000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    0.0000    0.7000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    0.0000    2.1000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    1.2124    0.0000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    1.2124    2.8000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    2.4249    0.7000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    2.4249    2.1000    0.0000 C   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>M  END
</span></span><span style="display:flex;"><span>$$$$
</span></span></code></pre></div><p>Similar tests worked on both Linux and Windows using the same jarfile.</p>
<p>There are still some issues to be addressed with this approach. For example, various reports indicate that NestedVM code runs about four to ten times slower than native execution. Benchmarking may be useful at this point.</p>
<p>Another issue is how to go about making a Java InChI library with NestedVM. If you decompile the <strong>jinchi.jar</strong> file, you&rsquo;ll find that the <strong>JInChI.class</strong> file is a large and complex beast in which almost all methods are named as hex numbers. It may be possible to create a library by renaming certain methods and breaking the code into smaller classfiles, but the NestedVM documentation seems sparse on this subject.</p>
<p>Despite these difficulties, this article demonstrates the power of NestedVM and describes the first (and currently only) example of a 100% Java InChI implementation.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
