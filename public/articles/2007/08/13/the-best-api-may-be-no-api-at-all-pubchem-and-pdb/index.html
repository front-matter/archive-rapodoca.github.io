<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>The Best API May Be No API At All - PubChem and PDB | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Both PubChem and the Protein Data Bank (PDB) maintain vast collections of molecular data. Individual users are free to view and search these collections via standard Web browsers. But what are the options if you&rsquo;re developing software to interact with these databases?
Various application programming interfaces (APIs) are available for accessing PubChem and PDB records. For example, PubChem recently introduced its Power User Gateway (PUG), an XML-based query language. But writing APIs is extremely difficult; reconciling the need for simplicity with the need for rich functionality is a tough balancing act. Where do you draw the line?">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Richard L. Apodaca">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/articles/2007/08/13/the-best-api-may-be-no-api-at-all-pubchem-and-pdb/">
    

    <meta property="og:url" content="http://localhost:1313/articles/2007/08/13/the-best-api-may-be-no-api-at-all-pubchem-and-pdb/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="The Best API May Be No API At All - PubChem and PDB">
  <meta property="og:description" content="Both PubChem and the Protein Data Bank (PDB) maintain vast collections of molecular data. Individual users are free to view and search these collections via standard Web browsers. But what are the options if you’re developing software to interact with these databases?
Various application programming interfaces (APIs) are available for accessing PubChem and PDB records. For example, PubChem recently introduced its Power User Gateway (PUG), an XML-based query language. But writing APIs is extremely difficult; reconciling the need for simplicity with the need for rich functionality is a tough balancing act. Where do you draw the line?">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2007-08-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2007-08-13T00:00:00+00:00">

  <meta itemprop="name" content="The Best API May Be No API At All - PubChem and PDB">
  <meta itemprop="description" content="Both PubChem and the Protein Data Bank (PDB) maintain vast collections of molecular data. Individual users are free to view and search these collections via standard Web browsers. But what are the options if you’re developing software to interact with these databases?
Various application programming interfaces (APIs) are available for accessing PubChem and PDB records. For example, PubChem recently introduced its Power User Gateway (PUG), an XML-based query language. But writing APIs is extremely difficult; reconciling the need for simplicity with the need for rich functionality is a tough balancing act. Where do you draw the line?">
  <meta itemprop="datePublished" content="2007-08-13T00:00:00+00:00">
  <meta itemprop="dateModified" content="2007-08-13T00:00:00+00:00">
  <meta itemprop="wordCount" content="617">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="The Best API May Be No API At All - PubChem and PDB">
  <meta name="twitter:description" content="Both PubChem and the Protein Data Bank (PDB) maintain vast collections of molecular data. Individual users are free to view and search these collections via standard Web browsers. But what are the options if you’re developing software to interact with these databases?
Various application programming interfaces (APIs) are available for accessing PubChem and PDB records. For example, PubChem recently introduced its Power User Gateway (PUG), an XML-based query language. But writing APIs is extremely difficult; reconciling the need for simplicity with the need for rich functionality is a tough balancing act. Where do you draw the line?">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">The Best API May Be No API At All - PubChem and PDB</h1>
      
      <p class="tracked">
        By <strong>Richard L. Apodaca</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2007-08-13T00:00:00Z">August 13, 2007</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Both <a href="http://pubchem.ncbi.nlm.nih.gov/">PubChem</a> and the <a href="http://www.rcsb.org/pdb/home/home.do">Protein Data Bank</a> (PDB) maintain vast collections of molecular data. Individual users are free to view and search these collections via standard Web browsers. But what are the options if you&rsquo;re developing software to interact with these databases?</p>
<p>Various application programming interfaces (APIs) are available for accessing PubChem and PDB records. For example, PubChem recently introduced its <a href="/articles/tag/pug">Power User Gateway</a> (PUG), an XML-based query language. But writing APIs is extremely difficult; reconciling the need for simplicity with the need for rich functionality is a tough balancing act. Where do you draw the line?</p>
<p>Recently, <a href="http://boscoh.com/">Bosco</a> described a <a href="http://boscoh.com/protein/fetching-pdb-files-remotely-in-pure-python-code">remarkably short method</a> to retrieve PDB records using nothing more than standard Python. Given the similarities between Python and Ruby, it seemed reasonable that his method could be adapted to Ruby.</p>
<p>The following Ruby library accepts a PDB identifier and returns the corresponding PDB record:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;net/http&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">module</span> PDB
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Returns a PDB record for the given id</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get_record</span> id
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Net</span><span style="color:#f92672">::</span><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">.</span>get_response(<span style="color:#e6db74">&#39;www.rcsb.org&#39;</span>, <span style="color:#e6db74">&#34;/pdb/files/</span><span style="color:#e6db74">#{</span>id<span style="color:#e6db74">}</span><span style="color:#e6db74">.pdb&#34;</span>)<span style="color:#f92672">.</span>body
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Notice how the business end of this library is nothing more than a single line of Ruby code.</p>
<p>The library can be tested by saving it in a file called <code>pdb.rb</code> and invoking interactive Ruby (irb):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>irb
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; require <span style="color:#e6db74">&#39;pdb&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; true
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:002:0&gt; puts PDB::get_record<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;1hpn&#39;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>HEADER    GLYCOSAMINOGLYCAN                       17-JAN-95   1HPN
</span></span><span style="display:flex;"><span>TITLE     N.M.R. AND MOLECULAR-MODELLING STUDIES OF THE SOLUTION
</span></span><span style="display:flex;"><span>TITLE    <span style="color:#ae81ff">2</span> CONFORMATION OF HEPARIN
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>truncated<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Several months ago, a D-F article described a related, but somewhat lengthier approach to <a href="/articles/2006/08/30/hacking-pubchem-with-ruby">retrieving PubChem molfiles</a>. Using the same approach we used for PDB, we can create the world&rsquo;s shortest PubChem library:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;net/http&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">module</span> PubChem
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Returns a molfile for the given PubChem CID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get_molfile</span> cid
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Net</span><span style="color:#f92672">::</span><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">.</span>get_response(<span style="color:#e6db74">&#39;pubchem.ncbi.nlm.nih.gov&#39;</span>, <span style="color:#e6db74">&#34;/summary/summary.cgi?cid=</span><span style="color:#e6db74">#{</span>cid<span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;disopt=DisplaySDF&#34;</span>)<span style="color:#f92672">.</span>body
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span> 
</span></span></code></pre></div><p>This library can be tested by saving it in a file called <code>pubchem.rb</code> followed by running irb:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>irb
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; require <span style="color:#e6db74">&#39;pubchem&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; true
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:002:0&gt; puts PubChem::get_molfile<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;969472&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">#eszopiclone (Lunesta)</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">969472</span>
</span></span><span style="display:flex;"><span>  -OEChem-08130700422D
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">44</span> <span style="color:#ae81ff">47</span>  <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0999</span> V2000
</span></span><span style="display:flex;"><span>    9.2619   -2.2732    0.0000 Cl  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>truncated<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Both of these Ruby libraries leverage one the most versatile and robust protocols ever developed: plain old http. The last few years have witnessed a renaissance in using bare http as platform for building simplified yet powerful Web APIs with less software. Referred to as <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">REST</a>, the approach has gained traction partly in response to the wasteful complexities introduced by various XML-based approaches. Although <a href="/articles/2007/05/30/restful-cheminformatics">slow to catch on in cheminformatics</a>, REST has enormous potential in unifying <a href="/articles/2007/01/24/thirty-two-free-chemistry-databases">a diverse array</a> of isolated database systems.</p>
<p>One limitation of the approach described here is that the PubChem (or PDB) folks may get upset if you use it a lot. For example, if you examine the <a href="http://pubchem.ncbi.nlm.nih.gov/robots.txt">PubChem robots.txt file</a>, you&rsquo;ll notice that access to the <!-- raw HTML omitted -->summary.cgi<!-- raw HTML omitted --> resource, which our library makes use of, is prohibited to robots:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">...
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">User-agent: *
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">...
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Disallow: /summary/summary.cgi
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">...
</span></span></span></code></pre></div><p>What makes a &ldquo;robot&rdquo; and does your software qualify for exclusion? The answer is not enirely clear-cut, especially in the era of browser-side scripting.</p>
<p>Regardless, it looks like PubChem&rsquo;s policy was put in place in 2004, long before PubChem had experience with usage patterns for its service. It may be that this restriction could be relaxed without adversely affecting PubChem&rsquo;s ability to operate efficiently. It may even be possible to offer a low-level http retrieval method alongside PubChem&rsquo;s PUG interface on a machine dedicated to automated queries (i.e., <a href="http://eutils.ncbi.nlm.nih.gov/entrez/query/static/eutils_help.html">Entrez eUtils</a>).</p>
<p>As developers, our mission is to deliver functionality, not to write software. We should extract every possible ounce of value from established protocols and APIs before writing a single line of additional code. REST, and the creative use of good old http, are powerful tools to do so.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
