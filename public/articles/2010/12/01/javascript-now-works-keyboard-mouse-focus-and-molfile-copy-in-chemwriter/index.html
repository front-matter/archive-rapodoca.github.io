<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>JavaScript Now Works - Keyboard, Mouse Focus, and Molfile Copy in ChemWriter | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Paul Graham probably said it best when parsing the meaning of the term &ldquo;Ajax&rdquo;: JavaScript Now Works. In the five years since he made that statement, the performance of JavaScript has continued to improve. This is one of those developments that was easy to miss because it: (a) required the reversal of long-held negative perceptions; and (b) has unfolded at such as slow pace.
For many years, the only options for building highly interactive Web components were Java applets and Flash. Although both plugin technologies have much to offer, one of their weakest qualities is browser integration. Event focus and text copy are two cases in point.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Richard L. Apodaca">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/articles/2010/12/01/javascript-now-works-keyboard-mouse-focus-and-molfile-copy-in-chemwriter/">
    

    <meta property="og:url" content="http://localhost:1313/articles/2010/12/01/javascript-now-works-keyboard-mouse-focus-and-molfile-copy-in-chemwriter/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="JavaScript Now Works - Keyboard, Mouse Focus, and Molfile Copy in ChemWriter">
  <meta property="og:description" content="Paul Graham probably said it best when parsing the meaning of the term “Ajax”: JavaScript Now Works. In the five years since he made that statement, the performance of JavaScript has continued to improve. This is one of those developments that was easy to miss because it: (a) required the reversal of long-held negative perceptions; and (b) has unfolded at such as slow pace.
For many years, the only options for building highly interactive Web components were Java applets and Flash. Although both plugin technologies have much to offer, one of their weakest qualities is browser integration. Event focus and text copy are two cases in point.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2010-12-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2010-12-01T00:00:00+00:00">

  <meta itemprop="name" content="JavaScript Now Works - Keyboard, Mouse Focus, and Molfile Copy in ChemWriter">
  <meta itemprop="description" content="Paul Graham probably said it best when parsing the meaning of the term “Ajax”: JavaScript Now Works. In the five years since he made that statement, the performance of JavaScript has continued to improve. This is one of those developments that was easy to miss because it: (a) required the reversal of long-held negative perceptions; and (b) has unfolded at such as slow pace.
For many years, the only options for building highly interactive Web components were Java applets and Flash. Although both plugin technologies have much to offer, one of their weakest qualities is browser integration. Event focus and text copy are two cases in point.">
  <meta itemprop="datePublished" content="2010-12-01T00:00:00+00:00">
  <meta itemprop="dateModified" content="2010-12-01T00:00:00+00:00">
  <meta itemprop="wordCount" content="482">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="JavaScript Now Works - Keyboard, Mouse Focus, and Molfile Copy in ChemWriter">
  <meta name="twitter:description" content="Paul Graham probably said it best when parsing the meaning of the term “Ajax”: JavaScript Now Works. In the five years since he made that statement, the performance of JavaScript has continued to improve. This is one of those developments that was easy to miss because it: (a) required the reversal of long-held negative perceptions; and (b) has unfolded at such as slow pace.
For many years, the only options for building highly interactive Web components were Java applets and Flash. Although both plugin technologies have much to offer, one of their weakest qualities is browser integration. Event focus and text copy are two cases in point.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">JavaScript Now Works - Keyboard, Mouse Focus, and Molfile Copy in ChemWriter</h1>
      
      <p class="tracked">
        By <strong>Richard L. Apodaca</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2010-12-01T00:00:00Z">December 1, 2010</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Paul Graham probably said it best when parsing the meaning of the term &ldquo;Ajax&rdquo;: <a href="http://www.paulgraham.com/web20.html">JavaScript Now Works</a>. In the five years since he made that statement, the performance of JavaScript has continued to improve. This is one of those developments that was easy to miss because it: (a) required the reversal of long-held negative perceptions; and (b) has unfolded at such as slow pace.</p>
<p>For many years, the only options for building highly interactive Web components were Java applets and Flash. Although both plugin technologies have much to offer, one of their weakest qualities is browser integration. Event focus and text copy are two cases in point.</p>
<h1 id="focus-events-and-applets">Focus, Events, and Applets</h1>
<p>ChemWriter is a chemical structure drawing tool, first released as a Java applet, that makes extensive use of keyboard shortcuts to speed the drawing of complex structures. For these shortcuts to work, the applet must be able to capture keyboard and mouse focus.</p>
<p>On many platform/browser/JVM configurations, keyboard and mouse focus capture works quite well. Internet Explorer on Windows is one of these system configurations. Simply hovering the mouse cursor over a ChemWriter instance is enough to capture keyboard focus. On other system configurations, keyboard focus doesn&rsquo;t work well at all. For example, Safari on Mac requires a click inside the editor to begin capturing keyboard events. And for unknown reasons this mechanism periodically fails even on system configurations that generally work well otherwise.</p>
<p>But the issue isn&rsquo;t just limited to keyboard events - it applies to mouse events as well. This means that the only way to begin editing an existing structure without clicking on the drawing area and generating an unwanted drawing element (a not-too-uncommon situation) is to find a &lsquo;dead&rsquo; place on the editor to click (say, one of the scrollbars).</p>
<h1 id="keyboardmouse-focus-now-works-everywhere">Keyboard/Mouse Focus Now Works Everywhere</h1>
<p><a href="http://metamolecular.com">My company</a> has been <a href="http://depth-first.com/articles/2010/11/22/google-closure-building-complex-applications-with-javascript/">rewriting ChemWriter</a> as a plugin-free, pure JavaScript component. There have been many pleasant surprises along the way, and one of them has been the way that keyboard and mouse focus just work across all browsers we&rsquo;ve tested. To <a href="http://depth-first.com/articles/2010/11/30/atom-labels-now-available-in-chemwriter-2/">add atom labels</a>, simply hover over a vertex and type a <a href="http://chemwriter.com/articles/keyboard-shortcuts">single-character keyboard shortcut</a>. Both keyboard and mouse events are captured, regardless of what other page components may have been focused beforehand.</p>
<h1 id="molfile-copy-now-works-everywhere">Molfile Copy Now Works Everywhere</h1>
<p>Another problem area has been copying molfiles from ChemWriter to the system clipboard. Like event focus, this functionality works well on some platforms, but not at all on others. For example, all Mac-based browsers appear to be incapable of copying text from a Java popup to the system clipboard, but this feature works great on Windows.</p>
<p><img src="/images/posts/chemwriter-molfile-copy.png" alt="ChemWriter Molfile Copy" title="ChemWriter Molfile Copy"></p>
<p>In our JavaScript rewrite, molfile copy to the system clipboard works flawlessly on all browsers tested.</p>
<h1 id="try-it-for-yourself">Try It for Yourself</h1>
<p>We&rsquo;ve set up a <a href="http://chemwriter.com/signups/new">ChemWriter demo site</a> to encourage those who might be interested in trying the most recent development version against the browser of their choice.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
