<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Interactive Ruby Open Babel | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="One of my favorite features of Ruby is the Interactive Ruby (irb) shell. For those who haven&rsquo;t used it, irb lets you interactively create Ruby programs. Are you not exactly sure how to use that new library? Do you want to be able to &ldquo;play&rdquo; with an object to see how it works? Then irb is the perfect tool.
One of the new features contained in Open Babel 2.1 is a Ruby interface. The power and convenience of irb makes it an excellent tool for exploring Open Babel. With some minor customizations, it can be even better.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Richard L. Apodaca">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="https://depth-first.com:1313/articles/2007-05-16-interactive-ruby-open-babel/">
    

    <meta property="og:url" content="https://depth-first.com:1313/articles/2007-05-16-interactive-ruby-open-babel/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="Interactive Ruby Open Babel">
  <meta property="og:description" content="One of my favorite features of Ruby is the Interactive Ruby (irb) shell. For those who haven’t used it, irb lets you interactively create Ruby programs. Are you not exactly sure how to use that new library? Do you want to be able to “play” with an object to see how it works? Then irb is the perfect tool.
One of the new features contained in Open Babel 2.1 is a Ruby interface. The power and convenience of irb makes it an excellent tool for exploring Open Babel. With some minor customizations, it can be even better.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2007-05-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2007-05-16T00:00:00+00:00">

  <meta itemprop="name" content="Interactive Ruby Open Babel">
  <meta itemprop="description" content="One of my favorite features of Ruby is the Interactive Ruby (irb) shell. For those who haven’t used it, irb lets you interactively create Ruby programs. Are you not exactly sure how to use that new library? Do you want to be able to “play” with an object to see how it works? Then irb is the perfect tool.
One of the new features contained in Open Babel 2.1 is a Ruby interface. The power and convenience of irb makes it an excellent tool for exploring Open Babel. With some minor customizations, it can be even better.">
  <meta itemprop="datePublished" content="2007-05-16T00:00:00+00:00">
  <meta itemprop="dateModified" content="2007-05-16T00:00:00+00:00">
  <meta itemprop="wordCount" content="569">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Interactive Ruby Open Babel">
  <meta name="twitter:description" content="One of my favorite features of Ruby is the Interactive Ruby (irb) shell. For those who haven’t used it, irb lets you interactively create Ruby programs. Are you not exactly sure how to use that new library? Do you want to be able to “play” with an object to see how it works? Then irb is the perfect tool.
One of the new features contained in Open Babel 2.1 is a Ruby interface. The power and convenience of irb makes it an excellent tool for exploring Open Babel. With some minor customizations, it can be even better.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Articles
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Interactive Ruby Open Babel</h1>
      
      <p class="tracked">
        By <strong>Richard L. Apodaca</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2007-05-16T00:00:00Z">May 16, 2007</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>One of my favorite features of Ruby is the <a href="http://tryruby.hobix.com/">Interactive Ruby</a> (irb) shell. For those who haven&rsquo;t used it, irb lets you interactively create Ruby programs. Are you not exactly sure how to use that new library? Do you want to be able to &ldquo;play&rdquo; with an object to see how it works? Then irb is the perfect tool.</p>
<p>One of the new features contained in <a href="http://sourceforge.net/project/showfiles.php?group_id=40728&amp;package_id=32894&amp;release_id=499413">Open Babel 2.1</a> is a <a href="http://depth-first.com/articles/2007/04/09/painless-installation-of-ruby-open-babel">Ruby interface</a>. The power and convenience of irb makes it an excellent tool for exploring Open Babel. With some minor customizations, it can be even better.</p>
<h1 id="customizing-irb">Customizing irb</h1>
<p>Your irb sessions can be customized by creating and editing the <strong>.irbrc</strong> file located in your home directory. This file, containing standard Ruby, is loaded prior to the start of your irb session.</p>
<h1 id="tab-completion">Tab Completion</h1>
<p>Code completion is one of those things that, once you&rsquo;ve used it, you wonder how you ever got by without. Although it tends not to be activated by default, irb fully supports code completion with the &ldquo;Tab&rdquo; key.</p>
<p>To activate this feature, add the following line to your <strong>.irbrc</strong> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;irb/completion&#39;</span>
</span></span></code></pre></div><p>As an example, let&rsquo;s say you&rsquo;d like to use irb to understand how <code>OpenBabel::OBMol</code> objects work. Entering the following code gets you there:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>irb
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:001:0&gt; require <span style="color:#e6db74">&#39;openbabel&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; true
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:002:0&gt; mol<span style="color:#f92672">=</span>OpenBabel::OBMol.new
</span></span><span style="display:flex;"><span><span style="color:#f92672">=</span>&gt; <span style="color:#75715e">#&amp;lt;OpenBabel::OBMol:0xb7cd30a4&amp;gt;</span>
</span></span></code></pre></div><p>What exactly can this OBMol do? Let&rsquo;s start with the &ldquo;get&rdquo; methods. Entering <code>mol.get</code> followed by the Tab key gives the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:003:0&gt; mol.get
</span></span><span style="display:flex;"><span>mol.get_angle                    mol.get_gidvector
</span></span><span style="display:flex;"><span>mol.get_atom                     mol.get_givector
</span></span><span style="display:flex;"><span>mol.get_bond                     mol.get_gtdvector
</span></span><span style="display:flex;"><span>mol.get_conformer                mol.get_internal_coord
</span></span><span style="display:flex;"><span>mol.get_conformers               mol.get_mod
</span></span><span style="display:flex;"><span>mol.get_coordinates              mol.get_mol_wt
</span></span><span style="display:flex;"><span>mol.get_data                     mol.get_residue
</span></span><span style="display:flex;"><span>mol.get_dimension                mol.get_spaced_formula
</span></span><span style="display:flex;"><span>mol.get_energy                   mol.get_sssr
</span></span><span style="display:flex;"><span>mol.get_exact_mass               mol.get_title
</span></span><span style="display:flex;"><span>mol.get_first_atom               mol.get_torsion
</span></span><span style="display:flex;"><span>mol.get_flags                    mol.get_total_charge
</span></span><span style="display:flex;"><span>mol.get_formula                  mol.get_total_spin_multiplicity
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:003:0&gt; mol.get_
</span></span></code></pre></div><p>If you were interested in molecular weight, you&rsquo;d see the <code>mol.get\_mol\_wt</code> method, which you could fully enter by typing <code>mol.get\_mol</code> followed by the Tab key.</p>
<p>Tab completion also works with module names. What are the complete contents of the <code>OpenBabel</code> module? Just type <code>OpenBabel::</code> followed by the Tab key. There are over 400 possibilities, so you might want to narrow it down a bit. For example, <code>OpenBabel::OBM</code> followed by the Tab key gives:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:003:0&gt; OpenBabel::OBM
</span></span><span style="display:flex;"><span>OpenBabel::OBMessageHandler  OpenBabel::OBMolAtomDFSIter  OpenBabel::OBMolRingIter
</span></span><span style="display:flex;"><span>OpenBabel::OBMol             OpenBabel::OBMolAtomIter     OpenBabel::OBMolTorsionIter
</span></span><span style="display:flex;"><span>OpenBabel::OBMolAngleIter    OpenBabel::OBMolBondIter
</span></span><span style="display:flex;"><span>OpenBabel::OBMolAtomBFSIter  OpenBabel::OBMolPairIter
</span></span><span style="display:flex;"><span>irb<span style="color:#f92672">(</span>main<span style="color:#f92672">)</span>:003:0&gt; OpenBabel::OBM 
</span></span></code></pre></div><h1 id="persistent-command-history">Persistent Command History</h1>
<p>Just like other shell environments, irb supports a command line history through the up and down arrows. Like Tab completion, it&rsquo;s one of those things you can&rsquo;t work without.</p>
<p>As you use irb, you&rsquo;ll find yourself exiting and re-entering frequently. By default, irb doesn&rsquo;t support persistent command histories. This means your previous commands are lost every time you exit. What a pain.</p>
<p>Luckily, it&rsquo;s easy to create a persistent command history. Fire up your text editor and make the following changes to <strong>.irbrc</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;irb/completion&#39;</span>
</span></span><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;irb/ext/save-history&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ARGV</span><span style="color:#f92672">.</span>concat <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;--readline&#34;</span>, <span style="color:#e6db74">&#34;--prompt-mode&#34;</span>, <span style="color:#e6db74">&#34;simple&#34;</span> <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">IRB</span><span style="color:#f92672">.</span>conf<span style="color:#f92672">[</span><span style="color:#e6db74">:SAVE_HISTORY</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">IRB</span><span style="color:#f92672">.</span>conf<span style="color:#f92672">[</span><span style="color:#e6db74">:HISTORY_FILE</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">#{</span><span style="color:#66d9ef">ENV</span><span style="color:#f92672">[</span><span style="color:#e6db74">&#39;HOME&#39;</span><span style="color:#f92672">]</span><span style="color:#e6db74">}</span><span style="color:#e6db74">/.irb-save-history&#34;</span>
</span></span></code></pre></div><p>From now on, your last 100 irb commands will be just a single key away, regardless of how many sessions ago they were entered.</p>
<p>One caveat: if you compile Ruby from source, you may notice that the command history doesn&rsquo;t work. Instead, pressing the up-arrow displays &ldquo;[[A&rdquo;.</p>
<p>I found the fix in <!-- raw HTML omitted -->this list posting<!-- raw HTML omitted -->. In your Ruby source distribution directory, execute the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ext/readline
</span></span><span style="display:flex;"><span>ruby extconf.rb
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>sudo make install
</span></span></code></pre></div><p>Why this extension doesn&rsquo;t compile by default is beyond me, but at least the solution is simple.</p>
<h1 id="other-customizations">Other Customizations</h1>
<p>You can customize irb in many other ways. For some ideas, see <a href="http://www.rubycentral.com/book/irb.html">The Pickaxe Book</a> and <a href="http://wiki.rubygarden.org/Ruby/page/show/Irb/TipsAndTricks">RubyGarden</a>.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://depth-first.com:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
