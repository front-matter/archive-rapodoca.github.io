<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>JavaScript for Cheminformatics - Atom Typing with Prototype and Iterators | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="The previous article in this series discussed the use of Prototype to build a simple cheminformatics model. But there&rsquo;s much more to Prototype than an improved class-like syntax. This article discusses one specific way that Prototype enhances JavaScript collections through iterators.
The Problem
Let&rsquo;s say we have an instance of Molecule, as defined in the previous article, and we&rsquo;d like to group the carbon atoms separately from the heteroatoms. In many languages, including Java, we&rsquo;d have to write a for-loop complete with logic for comparing atoms and then placing them into bins. Prototype makes possible a more modular approach with iterators.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Richard L. Apodaca">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/articles/2008/08/28/javascript-for-cheminformatics-atom-typing-with-prototype-and-iterators/">
    

    <meta property="og:url" content="http://localhost:1313/articles/2008/08/28/javascript-for-cheminformatics-atom-typing-with-prototype-and-iterators/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="JavaScript for Cheminformatics - Atom Typing with Prototype and Iterators">
  <meta property="og:description" content="The previous article in this series discussed the use of Prototype to build a simple cheminformatics model. But there’s much more to Prototype than an improved class-like syntax. This article discusses one specific way that Prototype enhances JavaScript collections through iterators.
The Problem Let’s say we have an instance of Molecule, as defined in the previous article, and we’d like to group the carbon atoms separately from the heteroatoms. In many languages, including Java, we’d have to write a for-loop complete with logic for comparing atoms and then placing them into bins. Prototype makes possible a more modular approach with iterators.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2008-08-28T00:00:00+00:00">
    <meta property="article:modified_time" content="2008-08-28T00:00:00+00:00">

  <meta itemprop="name" content="JavaScript for Cheminformatics - Atom Typing with Prototype and Iterators">
  <meta itemprop="description" content="The previous article in this series discussed the use of Prototype to build a simple cheminformatics model. But there’s much more to Prototype than an improved class-like syntax. This article discusses one specific way that Prototype enhances JavaScript collections through iterators.
The Problem Let’s say we have an instance of Molecule, as defined in the previous article, and we’d like to group the carbon atoms separately from the heteroatoms. In many languages, including Java, we’d have to write a for-loop complete with logic for comparing atoms and then placing them into bins. Prototype makes possible a more modular approach with iterators.">
  <meta itemprop="datePublished" content="2008-08-28T00:00:00+00:00">
  <meta itemprop="dateModified" content="2008-08-28T00:00:00+00:00">
  <meta itemprop="wordCount" content="408">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="JavaScript for Cheminformatics - Atom Typing with Prototype and Iterators">
  <meta name="twitter:description" content="The previous article in this series discussed the use of Prototype to build a simple cheminformatics model. But there’s much more to Prototype than an improved class-like syntax. This article discusses one specific way that Prototype enhances JavaScript collections through iterators.
The Problem Let’s say we have an instance of Molecule, as defined in the previous article, and we’d like to group the carbon atoms separately from the heteroatoms. In many languages, including Java, we’d have to write a for-loop complete with logic for comparing atoms and then placing them into bins. Prototype makes possible a more modular approach with iterators.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">JavaScript for Cheminformatics - Atom Typing with Prototype and Iterators</h1>
      
      <p class="tracked">
        By <strong>Richard L. Apodaca</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2008-08-28T00:00:00Z">August 28, 2008</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>The previous article in this series discussed the use of <a href="http://depth-first.com/articles/2008/08/26/javascript-for-cheminformatics-using-the-prototype-framework">Prototype to build a simple cheminformatics model</a>. But there&rsquo;s much more to <a href="http://www.prototypejs.org/">Prototype</a> than an improved class-like syntax. This article discusses one specific way that Prototype enhances JavaScript collections through iterators.</p>
<h1 id="the-problem">The Problem</h1>
<p>Let&rsquo;s say we have an instance of <code>Molecule</code>, as defined in <a href="http://depth-first.com/articles/2008/08/26/javascript-for-cheminformatics-using-the-prototype-framework">the previous article</a>, and we&rsquo;d like to group the carbon atoms separately from the heteroatoms. In many languages, including Java, we&rsquo;d have to write a for-loop complete with logic for comparing atoms and then placing them into bins. Prototype makes possible a more modular approach with iterators.</p>
<h1 id="functional-programming-and-iterators">Functional Programming and Iterators</h1>
<p>JavaScript is a multi-paradigm programming language that offers tools for both object-oriented and <a href="http://www.joelonsoftware.com/items/2006/08/01.html">functional programming</a> approaches. In practical terms, this simply means that even functions in JavaScript behave as objects: they can be created dynamically and passed as parameters. Prototype takes advantage of this to extend collections instances such as <code>Arrays</code> with built-in iterators that are analogous to iterators found in languages such as Ruby.</p>
<h1 id="a-simple-test">A Simple Test</h1>
<p>The JavaScript below builds a pyridine molecule:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createPyridine</span>(){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pyridine</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Molecule</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">addAtom</span>(<span style="color:#e6db74">&#34;C&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">addAtom</span>(<span style="color:#e6db74">&#34;C&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">addAtom</span>(<span style="color:#e6db74">&#34;C&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">addAtom</span>(<span style="color:#e6db74">&#34;C&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c5</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">addAtom</span>(<span style="color:#e6db74">&#34;C&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">n6</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">addAtom</span>(<span style="color:#e6db74">&#34;N&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">c1</span>, <span style="color:#a6e22e">c2</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">c2</span>, <span style="color:#a6e22e">c3</span>, <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">c3</span>, <span style="color:#a6e22e">c4</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">c4</span>, <span style="color:#a6e22e">c5</span>, <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">c5</span>, <span style="color:#a6e22e">n6</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pyridine</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">n6</span>, <span style="color:#a6e22e">c1</span>, <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">pyridine</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Saving this code in a file called <!-- raw HTML omitted -->molecules.js<!-- raw HTML omitted -->, we can use Firefox with Firebug to test it with the following HTML:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;prototype.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;chem.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;molecules.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">body</span>&gt;&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><p>With the Firebug console, we create a <code>Molecule</code> of pyridine:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt;&gt;&gt; m <span style="color:#f92672">=</span> createPyridine<span style="color:#f92672">()</span>;
</span></span></code></pre></div><p>To separate carbons from heteroatoms, we use the Prototype <code>partition</code> iterator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt;&gt;&gt; m<span style="color:#f92672">=</span>createPyridine<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>Object atoms<span style="color:#f92672">=[</span>6<span style="color:#f92672">]</span> bonds<span style="color:#f92672">=[</span>6<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; m.atoms.partition<span style="color:#f92672">(</span><span style="color:#66d9ef">function</span><span style="color:#f92672">(</span>atom<span style="color:#f92672">){</span><span style="color:#66d9ef">return</span> atom.label <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;C&#34;</span><span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">[[</span>Object label<span style="color:#f92672">=</span>C neighbors<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span> bonds<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span>, Object label<span style="color:#f92672">=</span>C neighbors<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span> bonds<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span>, Object label<span style="color:#f92672">=</span>C neighbors<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span> bonds<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span>, <span style="color:#ae81ff">2</span> more...<span style="color:#f92672">]</span>, <span style="color:#f92672">[</span>Object label<span style="color:#f92672">=</span>N neighbors<span style="color:#f92672">=[</span>2<span style="color:#f92672">]</span> bonds<span style="color:#f92672">=[</span>2<span style="color:#f92672">]]]</span>
</span></span></code></pre></div><p>The <code>partition</code> iterator accepts a function as a parameter and returns an array containing two sub-arrays: the first contains the elements for which the function evaluated to <code>true</code> (carbons) and the second contains the elements for which the function evaluated to <code>false</code> (heteroatoms).</p>
<h1 id="conclusions">Conclusions</h1>
<p>Although the example shown here is rather simple, it&rsquo;s possible to extend the general principle to more complex atom typing systems. By creating a single function that evaluated atom type, we could pass it as a parameter to any number of collection iterator functions.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
