<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Humanizing Line Notations | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Line notations are useful for encoding molecular structure with computers, especially in a network environment. Because line notations are compact and ASCII-based, they can, among other purposes, be used to query popular Web search engines for chemical content on the web. Useful as line notations are for computers, they are not as useful to humans, who would much rather have a 2-D structure diagram to look at.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/articles/2006/09/02/humanizing-line-notations/">
    

    <meta property="og:url" content="http://localhost:1313/articles/2006/09/02/humanizing-line-notations/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="Humanizing Line Notations">
  <meta property="og:description" content="Line notations are useful for encoding molecular structure with computers, especially in a network environment. Because line notations are compact and ASCII-based, they can, among other purposes, be used to query popular Web search engines for chemical content on the web. Useful as line notations are for computers, they are not as useful to humans, who would much rather have a 2-D structure diagram to look at.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2006-09-02T00:00:00+00:00">
    <meta property="article:modified_time" content="2006-09-02T00:00:00+00:00">

  <meta itemprop="name" content="Humanizing Line Notations">
  <meta itemprop="description" content="Line notations are useful for encoding molecular structure with computers, especially in a network environment. Because line notations are compact and ASCII-based, they can, among other purposes, be used to query popular Web search engines for chemical content on the web. Useful as line notations are for computers, they are not as useful to humans, who would much rather have a 2-D structure diagram to look at.">
  <meta itemprop="datePublished" content="2006-09-02T00:00:00+00:00">
  <meta itemprop="dateModified" content="2006-09-02T00:00:00+00:00">
  <meta itemprop="wordCount" content="528">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Humanizing Line Notations">
  <meta name="twitter:description" content="Line notations are useful for encoding molecular structure with computers, especially in a network environment. Because line notations are compact and ASCII-based, they can, among other purposes, be used to query popular Web search engines for chemical content on the web. Useful as line notations are for computers, they are not as useful to humans, who would much rather have a 2-D structure diagram to look at.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Articles
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Humanizing Line Notations</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2006-09-02T00:00:00Z">September 2, 2006</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p><!-- raw HTML omitted -->Line notations<!-- raw HTML omitted --> are useful for encoding molecular structure with computers, especially in a network environment. Because line notations are compact and ASCII-based, they can, among other purposes, be used to <!-- raw HTML omitted -->query popular Web search engines<!-- raw HTML omitted --> for chemical content on the web. Useful as line notations are for computers, they are not as useful to humans, who would much rather have a 2-D structure diagram to look at.</p>
<p><!-- raw HTML omitted -->Depict<!-- raw HTML omitted --> is an example of software that generates 2-D structure renderings from a SMILES string. Behind the scenes, the software parses the SMILES string, creates a connection table, determines 2-D coordinates for its atoms, and produces a raster image of the result. Software accomplishing the same task is also available from <!-- raw HTML omitted -->OpenEye<!-- raw HTML omitted -->. In this tutorial, you&rsquo;ll see one way to create free Depict-like functionality from Open Source tools.</p>
<h1 id="the-ingredients">The Ingredients</h1>
<p>This tutorial uses Arton&rsquo;s <!-- raw HTML omitted -->Ruby Java Bridge<!-- raw HTML omitted -->, the installation and use of which has been outlined <!-- raw HTML omitted -->previously<!-- raw HTML omitted -->. In addition, you&rsquo;ll need to download <!-- raw HTML omitted -->Structure-CDK v0.1.2<!-- raw HTML omitted -->, also <!-- raw HTML omitted -->previously discussed<!-- raw HTML omitted -->. Be sure to download v0.1.2, as two upgrades have been released since the package was originally discussed.This tutorial has been tested on Mandriva Linux 2006.</p>
<p>Create a working directory called <code>depict</code>. From the <code>lib</code> directory of the Structure-CDK distribution, copy <code>cdk-20060714.jar</code> and <code>structure-cdk-0.1.2.jar</code> into your <code>depict</code> working directory.</p>
<h1 id="the-code">The Code</h1>
<p>Now create a file called <code>depict.rb</code> and copy the following code into it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">ENV</span><span style="color:#f92672">[</span><span style="color:#e6db74">&#39;CLASSPATH&#39;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;./cdk-20060714.jar:./structure-cdk-0.1.2.jar&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;rubygems&#39;</span>
</span></span><span style="display:flex;"><span>require_gem <span style="color:#e6db74">&#39;rjb&#39;</span>
</span></span><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;rjb&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SmilesParser</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">Rjb</span><span style="color:#f92672">::</span>import <span style="color:#e6db74">&#39;org.openscience.cdk.smiles.SmilesParser&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">StructureDiagramGenerator</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">Rjb</span><span style="color:#f92672">::</span>import <span style="color:#e6db74">&#39;org.openscience.cdk.layout.StructureDiagramGenerator&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ImageKit</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">Rjb</span><span style="color:#f92672">::</span>import <span style="color:#e6db74">&#39;net.sf.structure.cdk.util.ImageKit&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Depictor</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">initialize</span>
</span></span><span style="display:flex;"><span>    @smiles_parser <span style="color:#f92672">=</span> <span style="color:#66d9ef">SmilesParser</span><span style="color:#f92672">.</span>new
</span></span><span style="display:flex;"><span>    @sdg <span style="color:#f92672">=</span> <span style="color:#66d9ef">StructureDiagramGenerator</span><span style="color:#f92672">.</span>new
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">depict_png</span>(smiles, width, height, path_to_png)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">ImageKit</span><span style="color:#f92672">::</span>writePNG(smi_to_mol(smiles), width, height, path_to_png)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">depict_svg</span>(smiles, width, height, path_to_svg)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">ImageKit</span><span style="color:#f92672">::</span>writeSVG(smi_to_mol(smiles), width, height, path_to_svg)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">smi_to_mol</span>(smiles)
</span></span><span style="display:flex;"><span>    @sdg<span style="color:#f92672">.</span>setMolecule(@smiles_parser<span style="color:#f92672">.</span>parseSmiles(smiles))
</span></span><span style="display:flex;"><span>    @sdg<span style="color:#f92672">.</span>generateCoordinates
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @sdg<span style="color:#f92672">.</span>getMolecule
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>After you save this file, you&rsquo;ll need to set your <code>LD_LIBRARY_PATH</code> on unix (or the equivalent on another OS):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export LD_LIBRARY_PATH<span style="color:#f92672">=</span>$JAVA_HOME/jre/lib/i386:$LD_LIBRARY_PATH
</span></span></code></pre></div><p>This tells RJB where to find Java&rsquo;s native libraries. Because of RJB&rsquo;s current design, <!-- raw HTML omitted -->LD_LIBRARY_PATH<!-- raw HTML omitted --> needs to be set from the command line, rather than from within a Ruby process.</p>
<p>Using the <!-- raw HTML omitted -->Depictor<!-- raw HTML omitted --> class is simple. For example, to generate SVG and PNG images of desloratadine (Clarinex):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;depict&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>depictor <span style="color:#f92672">=</span> <span style="color:#66d9ef">Depictor</span><span style="color:#f92672">.</span>new
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>depictor<span style="color:#f92672">.</span>depict_svg(<span style="color:#e6db74">&#39;Clc4ccc3C(=C1CCNCC1)c2ncccc2CCc3c4&#39;</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">300</span>, <span style="color:#e6db74">&#39;desloratadine.svg&#39;</span>)
</span></span><span style="display:flex;"><span>depictor<span style="color:#f92672">.</span>depict_png(<span style="color:#e6db74">&#39;Clc4ccc3C(=C1CCNCC1)c2ncccc2CCc3c4&#39;</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">300</span>, <span style="color:#e6db74">&#39;desloratadine.png&#39;</span>)
</span></span></code></pre></div><h1 id="the-output">The Output</h1>
<p>Running the above code, either with the Ruby interpreter (ruby) or with Interactive Ruby (irb) will produce an SVG and a PNG image in your <code>depict</code> directory containing the 2-D structure of the popular antihistamine (see image below). Scalable Vector Graphics (SVG) format is a popular, XML-based vector graphics encoding system that can be viewed with the <!-- raw HTML omitted -->Firefox browser<!-- raw HTML omitted --> and several other software packages.</p>
<p>The code we&rsquo;ve used here takes advantage of convenience methods in the Structure-CDK library. However, it is possible to customize the output in several ways, including line thickness, line spacing, color scheme, and atom label height by using the library&rsquo;s lower-level API.</p>
<p>Being able to render a human-readable structure diagram from a line notation is useful in many situations. As you can see, this complex process can be accomplished quickly using Ruby, Java and open source chemical informatics libraries. Future articles will make use of this capability in building more complex chemical informatics systems.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
