<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Hacking Molbank: Creating a Graphical Table of Contents | Depth-First</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Molbank is an Open Access collection of single-compound articles on synthetic chemistry. Previous articles on Depth-First have highlighted Molbank&rsquo;s practice of including machine-readable molecular representations of its content, and its very liberal policy on mirroring and robots. In this article, we&rsquo;ll take advantage of both of these features to build something that was left out of Molbank: a graphical table of contents.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Richard L. Apodaca">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="https://depth-first.com:1313/articles/2006-12-11-hacking-molbank-creating-a-graphical-table-of-contents/">
    

    <meta property="og:url" content="https://depth-first.com:1313/articles/2006-12-11-hacking-molbank-creating-a-graphical-table-of-contents/">
  <meta property="og:site_name" content="Depth-First">
  <meta property="og:title" content="Hacking Molbank: Creating a Graphical Table of Contents">
  <meta property="og:description" content="Molbank is an Open Access collection of single-compound articles on synthetic chemistry. Previous articles on Depth-First have highlighted Molbank’s practice of including machine-readable molecular representations of its content, and its very liberal policy on mirroring and robots. In this article, we’ll take advantage of both of these features to build something that was left out of Molbank: a graphical table of contents.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2006-12-11T00:00:00+00:00">
    <meta property="article:modified_time" content="2006-12-11T00:00:00+00:00">

  <meta itemprop="name" content="Hacking Molbank: Creating a Graphical Table of Contents">
  <meta itemprop="description" content="Molbank is an Open Access collection of single-compound articles on synthetic chemistry. Previous articles on Depth-First have highlighted Molbank’s practice of including machine-readable molecular representations of its content, and its very liberal policy on mirroring and robots. In this article, we’ll take advantage of both of these features to build something that was left out of Molbank: a graphical table of contents.">
  <meta itemprop="datePublished" content="2006-12-11T00:00:00+00:00">
  <meta itemprop="dateModified" content="2006-12-11T00:00:00+00:00">
  <meta itemprop="wordCount" content="922">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hacking Molbank: Creating a Graphical Table of Contents">
  <meta name="twitter:description" content="Molbank is an Open Access collection of single-compound articles on synthetic chemistry. Previous articles on Depth-First have highlighted Molbank’s practice of including machine-readable molecular representations of its content, and its very liberal policy on mirroring and robots. In this article, we’ll take advantage of both of these features to build something that was left out of Molbank: a graphical table of contents.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Depth-First
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Articles
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Hacking Molbank: Creating a Graphical Table of Contents</h1>
      
      <p class="tracked">
        By <strong>Richard L. Apodaca</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2006-12-11T00:00:00Z">December 11, 2006</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p><!-- raw HTML omitted -->Molbank<!-- raw HTML omitted --> is an Open Access collection of single-compound articles on synthetic chemistry. Previous articles on Depth-First have highlighted Molbank&rsquo;s practice of including <!-- raw HTML omitted -->machine-readable molecular representations of its content<!-- raw HTML omitted -->, and its very <!-- raw HTML omitted -->liberal policy on mirroring and robots<!-- raw HTML omitted -->. In this article, we&rsquo;ll take advantage of both of these features to build something that was left out of Molbank: a graphical table of contents.</p>
<h1 id="the-graphical-table-of-contents-gtoc">The Graphical Table of Contents (GTOC)</h1>
<p><a href="/images/posts/20061211/molbank/index.html">The Molbank Graphical Table of Contents</a> (Molbank GTOC) is available online. It consists of a single Web page containing a grid of color 2-D chemical structures representing the contents of Molbank. Each structure is hyperlinked into the Molbank site itself. Clicking on the structure takes you to the complete synthetic procedure and characterization data.</p>
<p><img src="/images/posts/20061211/screenshot_1.png" alt="Molbank" title="Molbank"></p>
<h1 id="prerequisites-downloading-and-running">Prerequisites, Downloading, and Running</h1>
<p>To run this project, you&rsquo;ll need <!-- raw HTML omitted -->Ruby CDK<!-- raw HTML omitted -->. A recent article described the small amount of system configuration required for <!-- raw HTML omitted -->Ruby CDK on Linux<!-- raw HTML omitted -->. Another article showed how to install <!-- raw HTML omitted -->Ruby CDK on Windows<!-- raw HTML omitted -->.</p>
<p>The complete source code for this project can be <!-- raw HTML omitted -->downloaded from RubyForge<!-- raw HTML omitted -->. A subdirectory called <!-- raw HTML omitted -->demo<!-- raw HTML omitted --> contains the pre-built final result.</p>
<p>After unpacking the <!-- raw HTML omitted -->molbank-0.1.0<!-- raw HTML omitted --> archive, the demo application can be run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd molbank-0.0.1
</span></span><span style="display:flex;"><span>ruby test.rb
</span></span></code></pre></div><h1 id="problems-weve-got-problems">Problems, We&rsquo;ve Got Problems</h1>
<p>Several problems were uncovered while building the Molbank GTOC. This is to be expected with any data produced &ldquo;in the wild&rdquo; rather than within the safety of an Ivory Tower. Here are the main categories:</p>
<ul>
<li><strong>Blank Images</strong> The entry for M52 is blank. Checking the <!-- raw HTML omitted -->underlying molfile<!-- raw HTML omitted --> reveals four instances of bond stereo flags set to &ldquo;6,&rdquo; a problem common to many of the blank images in the GTOC. According to the Molfile specification, a value of 6 indicates &ldquo;Down, double bonds,&rdquo; whatever that means. Given that the <!-- raw HTML omitted -->molecules shown in M52<!-- raw HTML omitted --> only have one possible stereo bond, and that the Molfile specification relies on 2-D coordinates to encode double-bond geometry, an encoding inconsistency or incorrect stereo interpretation may be the cause.</li>
<li><strong>Images Containing an &ldquo;R&rdquo; Atom Label</strong> Entry M53 shows an &ldquo;R&rdquo; group at what should be the carbonyl carbon. <!-- raw HTML omitted -->The underlying molfile<!-- raw HTML omitted --> contains several less-common entries in the properties block, a common feature of images containing &ldquo;R&rdquo; in the GTOC.</li>
<li><strong>Molfile not Found</strong> Entry M95 has no associated Molfile because it simply reports errata for other articles. M253-M259, on the other hand, lack molfiles because the articles were &ldquo;withdrawn before publication.&rdquo; M347 describes a cyclodextrin for which, understandably, no molfile was provided. There are also a couple of cases in which a link to a molfile is provided, but is not available, such as M352.</li>
<li><strong>Broken Molfiles</strong> <!-- raw HTML omitted -->The Molfile for M162<!-- raw HTML omitted --> encodes its line endings as two carriage returns and a newline, giving rise to the appearance of blank lines after data lines. This is something the Molfile specification strictly forbids. Apparently, the underlying CDK molfile reader can only handle one carriage return and a newline. Perhaps the extra return was introduced as the file was copied into and out of text editors on various operating systems in preparation for uploading it to Molbank. Another common problem was binary files being used for molfiles, such as with <!-- raw HTML omitted -->M402<!-- raw HTML omitted -->. These files don&rsquo;t appear to be compressed with either Zip or GZip and their nature is currently unknown.</li>
<li><strong>Bogus Molfiles</strong> For reasons I still can&rsquo;t understand, <!-- raw HTML omitted -->the Molfile for M407<!-- raw HTML omitted --> encodes ethylene. So do several other Molbank molfiles. Other common dummy molfiles include toluene, benzene, and ethane.</li>
</ul>
<p>After cataloging the problems that exist with the Molbank dataset and the software used to mine it, two interesting questions come into focus:</p>
<ul>
<li>What can be done to help Molbank fix the most obvious problems in their molfiles and would they accept these improvements?</li>
<li>How can &ldquo;real&rdquo; datasets like Molbank help developers build better cheminformatics software? (a graphical Molfile Debugger Utility would come in handy&hellip;)</li>
</ul>
<p>Clearly, the connection between Open Access, Open Source, and Open Data is very strong and runs very deep.</p>
<h1 id="behind-the-scenes">Behind the Scenes</h1>
<p>The Ruby Molbank GTOC generator works by connecting to the <!-- raw HTML omitted --><a href="https://www.mdpi.net">www.mdpi.net</a><!-- raw HTML omitted --> server to get its data in real-time. Internally, the software creates a map of the Molbank website so that the molfile (and URL) for any article can be retrieved on demand. Each readable molfile is used to create a 2-D image using <!-- raw HTML omitted -->Ruby CDK<!-- raw HTML omitted -->. As a final step, the <!-- raw HTML omitted -->index.html<!-- raw HTML omitted --> page is generated, linking the 2-D images to a specific URL for a Molbank article. This file is <!-- raw HTML omitted -->produced with eRuby<!-- raw HTML omitted --> using a previously-described technique.</p>
<h1 id="conclusions">Conclusions</h1>
<p>Building a Graphical Table of Contents for Molbank is not that difficult given the power of Ruby, and Molbank&rsquo;s forward-thinking attitude toward mirroring and robots. In working on this project, several problems were uncovered, both with Molbank&rsquo;s data, and the software used to mine it.</p>
<p>In some ways, the software described here and its output are less interesting than the larger questions they raise:</p>
<ul>
<li>How do scientific journals best serve not only their readers, but developers who want to provide new ways to use the journal?</li>
<li>How far does copyright extend in scientific publications? For example, are molfiles copyrightable? If so, at what level of detail are they not? If atom coordinates or some other kind of non-essential information is left out, does that change anything?</li>
<li>In what other practical ways could the connection between Open Source, Open Data, and Open Access be explored?</li>
</ul>
<p>These and many related questions are waiting just around the corner. As Open Access becomes more viable, both <!-- raw HTML omitted -->technically <!-- raw HTML omitted --> and <!-- raw HTML omitted -->commercially<!-- raw HTML omitted -->, look to Open Source and Open Data to provide the synergies that will unlock its true potential.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://depth-first.com:1313/" >
    &copy;  Depth-First 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
