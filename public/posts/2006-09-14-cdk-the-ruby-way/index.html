<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>CDK, the Ruby Way | My New Hugo Site</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Previous articles have discussed how the Chemistry Development Kit (CDK) can interface with Ruby using the Ruby Java Bridge (RJB). However, each of these articles included a repetitive setup in which the CDK jarfile needed to be copied and the CLASSPATH variable needed to be set. In writing, as in programming, repeating yourself is a sure sign that something needs to be refactored.">
    <meta name="generator" content="Hugo 0.139.4">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/2006-09-14-cdk-the-ruby-way/">
    

    <meta property="og:url" content="http://localhost:1313/posts/2006-09-14-cdk-the-ruby-way/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="CDK, the Ruby Way">
  <meta property="og:description" content="Previous articles have discussed how the Chemistry Development Kit (CDK) can interface with Ruby using the Ruby Java Bridge (RJB). However, each of these articles included a repetitive setup in which the CDK jarfile needed to be copied and the CLASSPATH variable needed to be set. In writing, as in programming, repeating yourself is a sure sign that something needs to be refactored.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2006-09-14T00:00:00+00:00">
    <meta property="article:modified_time" content="2006-09-14T00:00:00+00:00">

  <meta itemprop="name" content="CDK, the Ruby Way">
  <meta itemprop="description" content="Previous articles have discussed how the Chemistry Development Kit (CDK) can interface with Ruby using the Ruby Java Bridge (RJB). However, each of these articles included a repetitive setup in which the CDK jarfile needed to be copied and the CLASSPATH variable needed to be set. In writing, as in programming, repeating yourself is a sure sign that something needs to be refactored.">
  <meta itemprop="datePublished" content="2006-09-14T00:00:00+00:00">
  <meta itemprop="dateModified" content="2006-09-14T00:00:00+00:00">
  <meta itemprop="wordCount" content="508">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CDK, the Ruby Way">
  <meta name="twitter:description" content="Previous articles have discussed how the Chemistry Development Kit (CDK) can interface with Ruby using the Ruby Java Bridge (RJB). However, each of these articles included a repetitive setup in which the CDK jarfile needed to be copied and the CLASSPATH variable needed to be set. In writing, as in programming, repeating yourself is a sure sign that something needs to be refactored.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        My New Hugo Site
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">CDK, the Ruby Way</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2006-09-14T00:00:00Z">September 14, 2006</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p><!-- raw HTML omitted -->Previous articles<!-- raw HTML omitted --> have discussed how the <!-- raw HTML omitted -->Chemistry Development Kit<!-- raw HTML omitted --> (CDK) can interface with Ruby using the <!-- raw HTML omitted -->Ruby Java Bridge<!-- raw HTML omitted --> (RJB). However, each of these articles included a repetitive setup in which the CDK jarfile needed to be copied and the <code>CLASSPATH</code> variable needed to be set. In writing, as in programming, <!-- raw HTML omitted -->repeating yourself<!-- raw HTML omitted --> is a sure sign that something needs to be refactored.</p>
<p>My solution is the <!-- raw HTML omitted -->Ruby Chemistry Development Kit<!-- raw HTML omitted --> (RCDK), a lightweight Ruby wrapper around the CDK. RCDK hides the boring details of interfacing CDK with Ruby, letting you get on to the more interesting things like doing a quick descriptor calculation, running a test, interfacing CDK with C/C++ or Ruby libraries, or building your <!-- raw HTML omitted -->Ruby on Rails<!-- raw HTML omitted --> CDK application.</p>
<p>RCDK is available as a <!-- raw HTML omitted -->RubyGem<!-- raw HTML omitted -->. One of the advantages of RubyGems compared to jarfiles is that the system automatically manages dependencies. For example, RCDK depends on RJB. If you haven&rsquo;t yet installed RJB, this will be taken care of for you as you install RCDK with the following command (run as root):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo gem install rcdk
</span></span></code></pre></div><p>During the interactive session that follows, you&rsquo;ll be asked which version of RJB should be installed. There are currently two Windows versions and two unix versions. Be prepared for a bit of a wait as the 10 Mb RCDK Gem installs itself.</p>
<p>After installing the RCDK RubyGem, there is one additional step you&rsquo;ll need to take. Update your bash profile or equivalent to point to your system&rsquo;s native Java libraries. On Linux with Sun&rsquo;s JDK, this consists of adding the following to <code>.bash_profile</code>, usually in your home directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export LD_LIBRARY_PATH<span style="color:#f92672">=</span>$JAVA_HOME/jre/lib/i386:$LD_LIBRARY_PATH
</span></span></code></pre></div><p>This step is needed due to the way that RJB is currently implemented. If <code>$JAVA_HOME</code> was not already set, it should point to your system&rsquo;s Java installation. Future versions of RJB may find a way to avoid this manual configuration step.</p>
<p>After RCDK has been installed and your <code>LD_LIBRARY_PATH</code> has been set, using RCDK is straightforward (notice the shortened <code>import</code> statement):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;rubygems&#39;</span>
</span></span><span style="display:flex;"><span>require_gem <span style="color:#e6db74">&#39;rcdk&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SmilesParser</span> <span style="color:#f92672">=</span> import <span style="color:#e6db74">&#39;org.openscience.cdk.smiles.SmilesParser&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parser <span style="color:#f92672">=</span> <span style="color:#66d9ef">SmilesParser</span><span style="color:#f92672">.</span>new
</span></span><span style="display:flex;"><span>smiles <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;c1ccccc1&#39;</span>
</span></span><span style="display:flex;"><span>mol <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parseSmiles(smiles)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>puts mol<span style="color:#f92672">.</span>getAtomCount <span style="color:#75715e"># =&gt;6</span>
</span></span></code></pre></div><p>A local jarfile (say, foo-0.1.1.jar) can be added to your classpath with the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">Java</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Classpath</span><span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;foo-0.1.1.jar&#39;</span>)
</span></span></code></pre></div><p>This approach to using the CDK has the added advantage that a Ruby-specific convenience layer could be introduced in a transparent way. For example, a very common chemical informatics task is to interconvert molfiles and SMILES strings. In the future, RCDK may introduce methods that will do these kinds of common tasks automatically, without the need to refer to CDK classes.</p>
<p>I don&rsquo;t know of <!-- raw HTML omitted -->any other attempts<!-- raw HTML omitted --> to package Java jarfiles as RubyGems for use with the C implementation of Ruby. It&rsquo;s a very simple approach that may be applicable to other Java libraries, especially as more Java programmers turn to Ruby. I have tested RCDK on Mandriva Linux 2006. Other operating systems may have their own configuration issues.</p>
<p>RCDK offers many opportunities to experiment with chemical informatics and Ruby, and Ruby-Java integration. Future articles will discuss some of the possibilities.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  My New Hugo Site 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
